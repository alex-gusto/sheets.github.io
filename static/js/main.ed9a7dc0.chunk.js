(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[2],{157:function(e,t,n){var a={"./Defaults":[82,0],"./Defaults.js":[82,0],"./Text":[83,1],"./Text.js":[83,1],"./default-layout":[34],"./default-layout.js":[34]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=157,e.exports=r},185:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(72),o=n.n(i),s=n(1),u=n(3),d=n(13),c=n(12),l=(n(89),n(90),n(15)),h=function(e){Object(d.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"navigationBar"},r.a.createElement("h3",null,"Navigation"),r.a.createElement("nav",{className:"navigationBarList"},r.a.createElement(l.b,{to:"/",className:"navItem"},"Time tracker"),r.a.createElement(l.b,{to:"/companies",className:"navItem"},"Companies"),r.a.createElement(l.b,{to:"/highcharts-gant",className:"navItem"},"Highcharts Gantt"),r.a.createElement(l.b,{to:"/tree-grid-gant",className:"navItem"},"TreeGrid gantt"),r.a.createElement(l.b,{to:"/tree-grid-gant-v2",className:"navItem"},"TreeGrid gantt v2")))}}]),n}(a.Component),p=(n(95),n(7)),m=n(5),f=function(e){return JSON.parse(JSON.stringify(e))},v=n(74),g=n.n(v),y=n(21),C=n.n(y),E={isEmpty:function(e){return""===e},isNotEmpty:function(e){return""!==e},isNumber:function(e){return"number"===typeof e&&!isNaN(e)}},D=window,S=D.TreeGrid;D.Grids.OnCustomAjax=function(e,t,a,r){return t.Url?n(157)("./".concat(t.Url)).then((function(e){var t=e.default;return r(0,t)})).catch((function(e){return e})):e.OnDataChanged(e,JSON.parse(e.GetChanges()),r),!0};var O={onDataChanged:g.a,nestedKey:"Items",body:[],Def:"R",DefEmpty:"R",DefParent:"R",Validator:null},b=function(e){Object(d.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).$el=Object(a.createRef)(),e.grid=null,e.gridBody=e.prepareBody(e.props.body),e.dataManager=new Worker("/sheets.github.io/ManageData.worker.js"),e.subscribeGridEvents=function(){e.grid.OnDataChanged=function(t,n,a){var r=n.Changes,i=e.props,o=i.body,s=i.nestedKey,u=i.Validator,d=[],c=[];if(u){var l=new u(t).validate(r),h=Object(p.a)(l,2);d=h[0],c=h[1]}var m=c.length;if(a(0,{IO:{Result:m?-1:0},Changes:m?c:d}),!m){t.AcceptChanges();e.dataManager.addEventListener("message",(function t(){var n;(n=e).onDataManagerMessage.apply(n,arguments),e.dataManager.removeEventListener("message",t)})),e.dataManager.postMessage(["update",{changes:r,data:o,nestedKey:s}])}}},e.onDataManagerMessage=function(t){if(Array.isArray(t.data)){var n=e.props.onDataChanged,a=Object(p.a)(t.data,2),r=a[0],i=a[1];switch(r){case"updated":n(i.data);break;case"error":console.error("Worker error: ",i.data);break;default:console.debug("Worker: event not found!")}}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.initGrid(),this.subscribeGridEvents()}},{key:"componentWillUnmount",value:function(){this.dataManager.terminate(),this.grid&&this.grid.Dispose()}},{key:"initGrid",value:function(){var e=this.props,t=e.layout,n=e.id,a=C()({},t);this.grid=S({Debug:0,id:n,Layout:{Data:a},Upload:{Format:"JSON",Flags:"Spanned",Type:"Changes,Span,Gantt"},Data:{Data:{Body:[this.gridBody]}}},this.$el.current,{Component:this,Helpers:E})}},{key:"prepareBody",value:function(e){var t=this.props,n=t.nestedKey,a=t.Def,r=t.DefParent,i=t.DefEmpty;return e.map((function e(t){return t[n]&&t[n].length?(t.Def=t.Def||r,t.Items=t[n].map(e)):t.Def=t.Def||a,t.DefParent=t.DefParent||r,t.DefEmpty=t.DefEmpty||i,t}))}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.$el,style:{height:"100%",width:"100%"}})}}]),n}(a.Component);b.defaultProps=O;var G=b,T=n(75),P=n.n(T),j=n(34),A=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return P.a.apply(void 0,[{},j.default].concat(t,[function(e,t){if(Array.isArray(e))return t.concat(e)}]))},x={Cfg:{ShowDeleted:"0",AutoSort:"0",DateStrings:"1",ReloadChanged:"3",MainCol:"name",NoVScroll:1,Sorting:0,AutoUpdate:1,StandardFilter:3,SaveExpanded:1,PersistentCfg:2,Filtered:0,RoundNumbers:1,RoundNumbersDigits:2,Size:"Small",Undo:32,RowIndex:"Pos",SearchLap:1,FilterLap:1,Validate:"Changed,Messages",Sync:"Horz,Vert",SyncId:"TimeTracker",ExportType:"Expanded,Outline,Indent,ForceBorder,TextType,Strings,FixedRows,Size"},Toolbar:{Cells30Manipulate:"Undo,Redo,Add,AddChild,Calc,Outdent,Indent,ExpandAll,CollapseAll"},Def:{R:{Expanded:1}},DefCols:{C:{CanFilter:0}},Root:{AcceptDef:"Well",CDef:"Well"},Panel:{Copy:1,Delete:1,Select:1,Move:1},MenuPrint:{Items:"ColsCaption,Cols,SpaceCaption,RowsCaption,Foot,OptionsCaption,Options,SizeCaption,Size",Attribute:"CanPrint",HideUnused:"1"}};var I=n(11),k=n(76),w=n(45),N=n.n(w);function R(e,t){var n=null;return e.map((function(e){return function e(a,r){var i={name:a.name,id:a.id,hours:a.hours};return a.Items?i.Items=a.Items.map((function(t){return e(t,i)})):(i.start=a.start?a.start:n?n.end:t,i.end=i.start+60*a.hours*60*1e3,n=i),r?(r.start||(r.start=i.start),r.end=i.end||r.end,i):i}(e)}))}var M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=function e(n,a,r){return t===r?(n.push(a),n):(r<t&&a.Items&&a.Items.forEach((function(t){return e(n,t,r+1)})),n)};return e.reduce((function(e,t){return n(e,t,0)}),[])},_=function(){function e(){if(Object(s.a)(this,e),this.data=this.getFromLS()||k,e.instance)return e.instance;window.DataService=this,e.instance=this}return Object(u.a)(e,[{key:"save",value:function(e,t){if(!e)throw new Error("No key at save method");this.data[e]=t,this.saveToLS()}},{key:"saveToLS",value:function(){localStorage.setItem("data",JSON.stringify(this.data))}},{key:"getFromLS",value:function(){try{return JSON.parse(localStorage.getItem("data"))}catch(e){return null}}},{key:"getStartTime",value:function(){return this.data.OperationStartDate}},{key:"getPhases",value:function(){return R(this.data.Phases,this.getStartTime())}},{key:"getPhasesAux",value:function(){return R(this.data.PhasesAux,this.getStartTime())}},{key:"getOnlyPhases",value:function(){return M(this.getPhases(),e.PHASE_LEVEL)}},{key:"getOnlyEvents",value:function(){return M(this.getPhases(),e.EVENT_LEVEL)}},{key:"getOnlyEventsAux",value:function(){return M(this.getPhasesAux(),e.EVENT_LEVEL)}},{key:"getCompanies",value:function(){return this.data.Companies}},{key:"getCosts",value:function(){return this.data.Costs}},{key:"getDays",value:function(){for(var e=function e(t){return t.reduce((function(t,n){return n.Items?t+e(n.Items):t+(n.hours||0)}),0)}(this.data.Phases),t=this.getStartTime(),n=[];e>0;){var a=N()(t+60*e*60*1e3);n.push(a.format("YYYY_MM_DD")),e-=24}return n}}]),e}();_.WELL_LEVEL=0,_.PHASE_LEVEL=1,_.EVENT_LEVEL=2;var H=new _,F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(t,"_").concat(e)},W=function(e){return F(e.id,"start")},B=function(e){return F(e.id,"end")},L=function(e,t){return"".concat("G").concat(e).concat(t||"")},U=["Aqua","Blue","Fuchsia","Gray","Green","Lime","Maroon","Navy","Olive","Orange","Purple","Red","Silver","Teal","White","Yellow"],V=function(e){return e.reduce((function(e,t,n){return e[L("GanttHtml",n)]=t.name,e[L("GanttClass",n)]=U[n],e[L("GanttStart",n)]=t.start,e[L("GanttEnd",n)]=t.end,e}),{})},K=function(e){return e?"Box":"Left"},Z=function(){var e=V(H.getOnlyEvents()),t=(V(H.getOnlyEventsAux()),H.getOnlyEventsAux().map((function(e,t){return{Id:e.id,Start:e.start,Duration:e.hours,Class:U[t],Text:e.name,Type:K(t)}})));return[Object(I.a)({id:"24029a29010",title:"Main events",CanEdit:0},e),{id:"TimeTrackerAux",title:"Aux events",events:t}]};function z(e,t){var n=e.GetPrev(t);if(n)return"Event"!==n.Def.Name?z(e,n):n}var J=n(46),Y=n.n(J),$=n(77),X=n.n($);function q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.find((function(e){return Y()(e)&&!X()(e)}))}var Q=n(78),ee=n.n(Q),te=n(22),ne=function(){function e(){Object(s.a)(this,e),this._changes={}}return Object(u.a)(e,[{key:"getChange",value:function(e){return this._changes[e]||(this._changes[e]={id:e}),this._changes[e]}},{key:"addError",value:function(t,n,a){var r=this.getChange(t),i=e.getMessages(r,n);i.push(a),r[e.getErrorKey(n)]=i}},{key:"removeError",value:function(e,t){this.addError(e,t,"")}},{key:"getChanges",value:function(){return Object.values(this._changes).reduce((function(e,t){var n={};return Object.entries(t).forEach((function(e){var t=Object(p.a)(e,2),a=t[0],r=t[1];Array.isArray(r)?n[a]=r.find((function(e){return e}))||"":n[a]=r})),[].concat(Object(te.a)(e),[n])}),[])}}],[{key:"getErrorKey",value:function(e){return"".concat(e,"Error")}},{key:"getMessages",value:function(t,n){return t[e.getErrorKey(n)]||[]}}]),e}(),ae=function(){function e(t){if(Object(s.a)(this,e),this.validChanges=null,this.invalidChanges=null,this.rules={},!t)throw new Error("TreeGrid validator: Set related grid!");this.grid=t}return Object(u.a)(e,[{key:"_getRow",value:function(e){return this.grid.GetRowById(e)}},{key:"forEachRule",value:function(e){Object.entries(this.rules).forEach((function(t){var n=Object(p.a)(t,2),a=n[0],r=n[1];return e(a,r)}))}},{key:"validate",value:function(e){var t=this;return this.validChanges=new ne,this.invalidChanges=new ne,e.forEach((function(e){t.forEachRule((function(n,a){n in e&&a.call(t,e)}))})),[this.validChanges.getChanges(),this.invalidChanges.getChanges()]}}]),e}(),re=function(e){Object(d.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).layout=e.createLayout(),e.getEventStart=function(t,n,a){var r=z(t,n);return r?a(r,"_end"):e.props.OperationStartDate},e.getEventEnd=function(e,t){return e&&"number"===typeof t?e+t:""},e.getEventDuration=function(){var e=q.apply(void 0,arguments);return ee()(e)?"":36e5*e},e.getPlannedDepth=function(e,t,n,a){if(e.Helpers.isNotEmpty(a))return a;var r=z(e,t);return r?n(r,"_plannedDepth"):0},e.getActualDepth=function(t,n,a,r){if(t.Helpers.isNotEmpty(r))return r;if(!e.hasActual(t,n))return"";var i=z(t,n);return i?a(i,"_actualDepth"):0},e.getBehindHours=function(t,n,a,r){if(!e.hasActual(t,n))return"";var i=z(t,n);return(i?a(i,"behindHours"):0)+r},e.hasActual=function(e,t){return e.Helpers.isNotEmpty(t.actualHours)},e}return Object(u.a)(n,[{key:"createLayout",value:function(){var e=this.props,t=e.OperationStartDate,n=e.isAux,a=e.DerrickType,r={Cfg:{},LeftCols:[{Name:"code",CanFilter:1,MinWidth:60,CaseSensitive:0},{Name:"name",RelWidth:1,MinWidth:250,CanFilter:1,CaseSensitive:0}]};return r.Cols=function(e){e.isAux;return[{Name:"hours",MinWidth:80,CanEmpty:1,Format:",0.00",EditFormat:"",Type:"Float"},{Name:"_eventDuration",Type:"Float",Visible:0,CanHide:0,CanPrint:0,CanExport:0,Formula:"Grid.Component.props.getEventDuration(hours)"},{Name:"start",Visible:0,CanHide:0,CanPrint:0,CanExport:0},{Name:"_start",Format:"yyyy-M-d H:mm",Type:"Date",CanEdit:1,OnChange:'Grid.SetValue(Row, "start", Value, 1)',ClassFormula:'Grid.Helpers.isEmpty(start) && "TSClassReadOnly"',Formula:"start ? start : Grid.Component.props.getEventStart(Grid, Row, Get)",MinWidth:120},{Name:"_end",Format:"yyyy-M-d H:mm",Type:"Date",MinWidth:120,Formula:"Grid.Component.props.getEventEnd(_start, _eventDuration)"}]}({isAux:n}),r.Head=function(){var e={Pos:"Pos",name:"Name",code:"Code",hours:"Hours",_start:"Start",_end:"End"};return Object.keys(e).forEach((function(t){return function(e,t){t["".concat(e,"Align")]="Center"}(t,e)})),e.id="Header",[e]}(),r.Foot=[{id:"Total",Color:"#D0E6F5",CanDelete:0,CanEdit:0,Calculated:1,code:"SUM",hoursFormula:"sum()",_startFormula:"",_endFormula:'Grid.GetLast() ? Get(Grid.GetLast(), "_end") : ""'}],r.Solid=function(e){var t=e.OperationStartDate,n=(e.DerrickType,e.isAux),a=Z()[1].events;return n?[{id:"topBarAux",Visible:0,Cells:"OperationStartDate",OperationStartDate:t,OperationStartDateRecalc:256},{Kind:"Space",Cells:"GANTT,events",Space:2,events:a,eventsVisible:0,GANTTType:"Gantt",GANTTWidth:500,GANTTGanttRunSave:2,GANTTGanttRun:"events",GANTTGanttRunAdjust:"Shrink"}]:[{id:"topBar",Space:-1,Tag:"timeGridTopBar",Cells:"OperationStartDate",OperationStartDate:t,OperationStartDateLabel:"Start operation: ",OperationStartDateWidth:120,OperationStartDateFormat:"yyyy-M-d H:mm",OperationStartDateType:"Date",OperationStartDateRecalc:256,OperationStartDateOnChange:"Grid.Component.props.handleOperationStartDateChange(Grid,Value)"}]}({OperationStartDate:t,isAux:n,DerrickType:a}),r.Def=function(){var e={CanEdit:0,Calculated:1,nameCanEdit:1,codeCanEdit:1,hoursFormula:"sum()",_startFormula:'Row.firstChild ? Get(Row.firstChild, "_start") : ""',_endFormula:'Row.lastChild ? Get(Row.lastChild, "_end") : ""'};return{Well:Object(I.a)({CDef:"Phase",AcceptDef:"Phase",Class:"time-grid-well",Color:"#d7d7d7"},e),Phase:Object(I.a)({CDef:"Event",AcceptDef:"Event",Class:"time-grid-phase",Color:"#f0f0f0"},e),Event:{AcceptDef:"",CalcOrder:["nameClass","_tftHours","_plannedDepth","_plannedDepthClass","_actualDepth","_actualDepthClass","_eventDuration","_start","_startClass","_end"].join()}}}(),A(x,r)}},{key:"render",value:function(){return r.a.createElement(G,Object.assign({layout:this.layout,nestedKey:n.nestedKey,getBehindHours:this.getBehindHours,getActualDepth:this.getActualDepth,getPlannedDepth:this.getPlannedDepth,getEventEnd:this.getEventEnd,getEventStart:this.getEventStart,getEventDuration:this.getEventDuration,Validator:ae},this.props))}}]),n}(a.Component),ie={Cfg:{AutoUpdate:0,Undo:32,NoVScroll:1,FastGantt:1,GanttStyle:"Standard",Detail:1},Zoom:[{Name:"months",GanttUnits:"d",GanttWidth:"50",GanttDragUnits:"h",GanttChartRound:"d",GanttHeader1:"M#MMMM yyyy"},{Name:"days",GanttUnits:"h",GanttWidth:"8",GanttDragUnits:"m",GanttChartRound:"d",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h6#HH"},{Name:"hours",GanttUnits:"h",GanttWidth:"25",GanttDragUnits:"m",GanttChartRound:"h",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h#HH"},{Name:"minutes",GanttUnits:"m",GanttWidth:"2",GanttDragUnits:"s",GanttChartRound:"h",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h#HH",GanttHeader3:"m15#mm"}],Toolbar:{Visible:0,Cells05:"Zoom",ZoomType:"SelectGanttZoom",ZoomWidth:"90"}},oe=function(){var e=H.getOnlyEventsAux(),t={id:"Header",Spanned:1},n={Kind:"Header"};return e.forEach((function(e,a){var r,i,o=W(e);Object.assign(t,(r={},Object(m.a)(r,o,e.name),Object(m.a)(r,"".concat(o,"Span"),2),r)),Object.assign(n,(i={},Object(m.a)(i,W(e),"Start"),Object(m.a)(i,B(e),"End"),i))})),[t,n]},se=n(4),ue=n(23),de=n(36),ce=n.n(de),le=Object(ue.a)("list"),he=Object(ue.a)("data"),pe=function(){function e(t,n){Object(s.a)(this,e),Object.defineProperty(this,le,{writable:!0,value:void 0}),Object.defineProperty(this,he,{writable:!0,value:void 0}),this.nestedKey="";var a=f(t);this.nestedKey=n,Object(se.a)(this,he)[he]=a,Object(se.a)(this,le)[le]=function t(a,r){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=0;s<a.length;){var u=a[s++],d=n&&u[n]&&u[n].length>0;u[e.next]=d?u[n][0]:a[s]?a[s]:o,u[e.parent]=i,u[e.prev]=a[s-2]?a[s-2]:i,u[e.indexWithinParent]=s-1,r.set(u.id,u),d&&t(u[n],r,u,a[s])}return r}(a,new Map)}return Object(u.a)(e,[{key:"_getFutureIndex",value:function(t,n){var a=this.getItem(t),r=this.getItem(n);return a?a[e.indexWithinParent]:r?r[e.indexWithinParent]+1:0}},{key:"_getParentArr",value:function(e){return e?(e[this.nestedKey]=e[this.nestedKey]||[],e[this.nestedKey]):Object(se.a)(this,he)[he]}},{key:"_setChildToParent",value:function(e,t,n){var a=this._getParentArr(e);a.splice(t,0,n),this._updateIndexWithinParent(a)}},{key:"_updateIndexWithinParent",value:function(t){for(var n=0;n<t.length;){Object(se.a)(this,le)[le].get(t[n++].id)[e.indexWithinParent]=n-1}}},{key:"getItem",value:function(e){return Object(se.a)(this,le)[le].get(e)}},{key:"hasItem",value:function(e){return Object(se.a)(this,le)[le].has(e)}},{key:"removeItem",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasItem(t)){var a=this.getItem(t),r=a[e.parent],i=a[e.indexWithinParent];n&&Object(se.a)(this,le)[le].delete(t);var o=this._getParentArr(r);o.splice(i,1),this._updateIndexWithinParent(o)}}},{key:"addItem",value:function(t,n,a,r,i){if(this.hasItem(t))this.moveItem(t,n,a,r);else{var o=this.getItem(n),s=this._getFutureIndex(a,r),u=e.convertItemKeys(i);Object(se.a)(this,le)[le].set(t,u),u[e.parent]=o,this._setChildToParent(o,s,u)}}},{key:"moveItem",value:function(t,n,a,r){var i=this.getItem(t),o=this.getItem(n),s=this._getFutureIndex(a,r);this.removeItem(t,!1),i[e.parent]=o,this._setChildToParent(o,s,i)}},{key:"updateItem",value:function(t,n){if(this.hasItem(t)){var a=this.getItem(t),r=e.convertItemKeys(n);C()(a,r)}}},{key:"data",get:function(){return f(Object(se.a)(this,he)[he])}}],[{key:"convertItemKeys",value:function(e){return Object.entries(e).reduce((function(e,t){var n=Object(p.a)(t,2),a=n[0],r=n[1];return/^_|^f_|^[A-Z]_|Click|Error/.test(a)&&!/Span$/.test(a)||(r=function(e){return""===e?e:"0"===e?0:+e||e}(r),ce()(e,a,r)),e}),{})}}]),e}();pe.parent=Symbol("parent"),pe.next=Symbol("next"),pe.prev=Symbol("prev"),pe.indexWithinParent=Symbol("indexWithinParent");n(70);var me=[{Name:"Text",CanSort:0},{Name:"Start",Type:"Date",MinWidth:80,CanSort:0},{Name:"Duration",Type:"Float",MinWidth:80,CanSort:0},{Name:"End",Type:"Date",MinWidth:80,CanSort:0,Formula:"Start + Duration * 1000 * 60 * 60"}];function fe(e){return Function("return ".concat(e))()}var ve=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.id,r=n.colName,i=void 0===r?"events":r;Object(s.a)(this,e),this.createPopupLayout=function(e){var n=fe(e);return console.log(n),{Toolbar:{Cells:"Cancel,Ok",AddOnClick:"AddRowEnd",Cancel:"Cancel",CancelButton:"Button",CancelOnClick:"Grid.ParentDialog.Close(); return 1;",Ok:"Save",OkButton:"Button",OkOnClick:'Grids["'.concat(t.gridId,'"].Component.props.handleRunEditorSave(Grid); Grid.ParentDialog.Close(); return 1;')},Cols:me,Body:[n]}},this.onStartEdit=function(e,n,a){var r=e.GetValue(n,t.colName);return e.ShowPopupGrid(n,a,t.createPopupLayout(r))},this.onSave=function(e){if(e.HasChanges()){e.EndEdit(1);var t=e.ParentDialog.Row,n=e.ParentGrid;JSON.parse(e.GetChanges()).Changes.forEach((function(e){var a=n.GetGanttRunBox(t,"G",e.id);console.log(a,e),console.log(n.SetGanttRunBox(Object.assign(a,e)))}))}},this.gridId=a,this.colName=i},ge=(window.TGAddEvent,function(){var e=Object(a.useRef)(new ve({id:"GANTT"})),t=Object(a.useMemo)((function(){return function(){var e={Head:oe(),Cols:[{Name:"G",Type:"Gantt",GanttZoom:"days",GanttDataUnits:"h",GanttCount:10,GanttRunSave:2,GanttRun:"events",GanttRunAdjust:"Shrink"}],LeftCols:[{Name:"title",Visible:0},{Name:"events",Width:80,Visible:0,Button:"Enum",OnClick:"Focus,Grid.Component.props.handleRunColStartEdit(Grid,Row, Col)"}],Solid:(H.getStartTime(),[])};return A(ie,e)}()}),[]),n=Object(a.useMemo)((function(){return Z()}),[]);return r.a.createElement(G,{id:"GANTT",ganttRunKey:"events",layout:t,body:n,onDataChanged:function(e){e.forEach((function(e){var t=e.events,n=e.CanEdit,a=e.id,r=window.Grids[a];r&&(r.StartUpdate(),0!==n&&("string"===typeof t&&(t=Function("return ".concat(t))()),t.forEach((function(e){var t=e.Id,n=e.Start,a=e.Duration,i=e.Text;if(e.State){var o=r.GetRowById(t);r.SetValue(o,"start",+new Date(n)),r.SetValue(o,"hours",+a),r.SetValue(o,"name",i)}})),r.EndUpdate()))}))},handleRunEditorSave:function(){var t;return(t=e.current).onSave.apply(t,arguments)},handleRunColStartEdit:function(){var t;return(t=e.current).onStartEdit.apply(t,arguments)}})}),ye=window.TGSetEvent,Ce={start:["Start",function(e){return e}],hours:["Duration",function(e){return 60*e*60*1e3}],name:["Text",function(e){return e}]},Ee=function(e){Object(d.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onDataChanged=function(e,t){a.setState(Object(m.a)({},t,e),(function(){H.save(t,e)}))},a.handleOperationStartDateChange=function(e,t){a.setState({OperationStartDate:t})},a.handleDerrickTypeChange=function(e,t){a.setState({DerrickType:t})},a.state={DerrickType:1,Phases:a.prepareState(H.data.Phases),PhasesAux:a.prepareState(H.data.PhasesAux),OperationStartDate:H.getStartTime()},ye("OnSave","TimeTrackerAux",(function(e){var t=JSON.parse(e.GetChanges()).Changes,n=window.Grids.GANTT,a=n.GetRowById("TimeTrackerAux");t.forEach((function(e){var t=n.GetGanttRunBox(a,"G",e.id);Object.entries(e).forEach((function(e){var n=Object(p.a)(e,2),a=n[0],r=n[1],i=Ce[a];if(i){var o=Object(p.a)(i,2),s=o[0],u=o[1];t[s]=u(r)}})),t.End=null,console.log(n.SetGanttRunBox(t,"Resize"))}))})),a}return Object(u.a)(n,[{key:"prepareState",value:function(e){var t=f(e),n=["Well","Phase","Event"],a=[3,3,256];return t.forEach((function(e){return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.Def=n[r],t.Recalc=a[r],t.Items&&t.Items.forEach((function(t){return e(t,r+1)}))}(e,0)})),t}},{key:"render",value:function(){var e=this,t=this.state,n=t.DerrickType,a=t.Phases,i=t.PhasesAux,o=t.OperationStartDate;return r.a.createElement("div",{className:"time-grid-view"},r.a.createElement(ge,null),r.a.createElement("div",{id:"timeGridTopBar",className:"time-grid-view__top-bar"}),r.a.createElement("div",{className:"time-grid-view__grids"},r.a.createElement(re,{id:"TimeTrackerMain",body:a,DerrickType:n,OperationStartDate:o,handleDerrickTypeChange:this.handleDerrickTypeChange,handleOperationStartDateChange:this.handleOperationStartDateChange,onDataChanged:function(t){return e.onDataChanged(t,"Phases")}}),n?r.a.createElement(re,{id:"TimeTrackerAux",isAux:!0,body:i,DerrickType:n,OperationStartDate:o,onDataChanged:function(t){return e.onDataChanged(t,"PhasesAux")}}):""))}}]),n}(a.Component),De={Cfg:{Dragging:1,HideZero:1,Size:"Small",ShowDeleted:0,AutoSort:0,RowIndex:"Pos",Filtered:0,RoundNumbers:1,RoundNumbersDigits:2,ExportType:"Expanded,Outline,Indent,ForceBorder,TextType,Strings,FixedRows,Size",PrintPageOrientation:1,PrintPageSize:7,Undo:32,ColPaging:2,NoVScroll:1,Alternate:2,AutoUpdate:1},Def:{Comment:{CanEdit:0,CanCopy:0,CanDelete:0,CanSelect:0,CanDrag:0}},Toolbar:{Cells30Manipulate:"Undo,Redo",Cells20Data:"Print,ExportPDF,Export,Columns",Cells60Cfg:"Help"},Panel:{Select:1,Copy:1,Delete:1,Move:1},MenuExport:{Items:"ColsCaption,Cols,RowsCaption,OptionsCaption,Options",Attribute:"CanExport",HideUnused:1},MenuPrint:{Items:"ColsCaption,Cols,SpaceCaption,RowsCaption,OptionsCaption,Options,SizeCaption,Size",Attribute:"CanPrint",HideUnused:"1"}},Se=["in","out","onboard"],Oe=function(e){return[{Name:"prior"}].concat(Object(te.a)(e.map((function(e){return Se.map((function(t){return{Name:"".concat(e,"_").concat(t),Width:60}}))})).flat()))},be=n(79),Ge=n.n(be),Te=n(80),Pe=function(e){var t={Kind:"Header",Spanned:1,name:"Name",nameAlign:"Center"},n={Kind:"Header"},a={Def:"Comment",Spanned:1,name:"Comments",nameAlign:"Center",nameVertAlign:"middle",nameRowSpan:10};e.forEach((function(e){var r,i="".concat(e,"_in");Object.assign(t,(r={},Object(m.a)(r,i,e.replaceAll("_","-")),Object(m.a)(r,"".concat(i,"Span"),3),Object(m.a)(r,"".concat(i,"Align"),"Center"),r)),Se.forEach((function(t){var a;return Object.assign(n,(a={},Object(m.a)(a,"".concat(e,"_").concat(t),t.toUpperCase()),Object(m.a)(a,"".concat(e,"_").concat(t,"Align"),"Center"),a))})),Object.assign(a,Object(m.a)({},"".concat(i,"Span"),3))}));var r=Array.from({length:10}).map((function(){return Object(I.a)({},a)}));return e.forEach((function(e){var t=Ge()(0,9);r[t]["".concat(e,"_in")]=Object(Te.loremIpsum)()})),[t].concat(Object(te.a)(r),[t,Object(I.a)(Object(I.a)({},n),{},{id:"Header"})])},je=function(e){var t={Pos:"To",Spanned:1},n={Pos:"From",Spanned:1};return e.forEach((function(e){var a="".concat(e,"_in");Object.assign(t,Object(m.a)({},"".concat(a,"Span"),3)),Object.assign(n,Object(m.a)({},"".concat(a,"Span"),3))})),[t,n]},Ae=function(){var e=H.getDays(),t={Foot:je(e),Head:Pe(e),LeftCols:[{Name:"name",Spanned:1}],Cols:Oe(e)};return A(De,t)},xe=function(){var e=Object(a.useState)(H.getCompanies()),t=Object(p.a)(e,2),n=t[0],i=t[1],o=Object(a.useMemo)(Ae,[]);return r.a.createElement(G,{id:"Companies",layout:o,onDataChanged:function(e){i(e),H.save("Companies",e)},body:n})},Ie=n(17),ke=n.n(Ie),we=n(81),Ne=n.n(we);n(183)(ke.a),n(184)(ke.a);var Re=function(){var e=new Date;e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),e=e.getTime();var t=null,n=H.getStartTime(),i=H.getPhases().reduce((function(e,a){return function e(a,r){return r.Items?r.Items.reduce((function(t,n){return e(t,n)}),a):(r.end=(r.start||n)+60*r.hours*60*1e3,r.start=t?t.end:n,r.y=0,t=r,a.push(r)),a}(e,a)}),[]);console.log(i);var o=Object(a.useState)({title:{text:"Intraday jobs Scheduling"},xAxis:{currentDateIndicator:!0},yAxis:{categories:["Main","Aux"]},plotOptions:{series:{dragDrop:{draggableX:!0,dragMinY:0,dragMaxY:2,dragPrecisionX:6e4},dataLabels:{enabled:!0,format:"{point.name}"},allowPointSelect:!0,point:{events:{drag:function(e){console.log(e)}}}}},series:[{name:"Init M1, Import FIRT market data",data:i}]}),s=Object(p.a)(o,1)[0];return r.a.createElement(Ne.a,{containerProps:{style:{height:"100%"}},highcharts:ke.a,constructorType:"ganttChart",options:s})},Me={Cfg:{AutoUpdate:1,MainCol:"name",Size:"Small",GanttStyle:"Standard"},Def:{Well:{GANTTGanttClass:"Blue",Calculated:1,startFormula:"ganttstart()",endFormula:"ganttend()"},Phase:{GANTTGanttClass:"Aqua",Calculated:1,startFormula:"ganttstart()",endFormula:"ganttend()"},R:{DefEmpty:"R",DefParent:"Sum"}},Zoom:[{Name:"months",GanttUnits:"d",GanttWidth:"50",GanttDragUnits:"h",GanttChartRound:"d",GanttHeader1:"M#MMMM yyyy"},{Name:"days",GanttUnits:"h",GanttWidth:"8",GanttDragUnits:"m",GanttChartRound:"d",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h6#HH"},{Name:"hours",GanttUnits:"h",GanttWidth:"25",GanttDragUnits:"m",GanttChartRound:"h",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h#HH"},{Name:"minutes",GanttUnits:"m",GanttWidth:"2",GanttDragUnits:"s",GanttChartRound:"h",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h#HH",GanttHeader3:"m15#mm"}],Toolbar:{Cells05:"Zoom",ZoomType:"SelectGanttZoom",ZoomWidth:"90"}},_e=["Aqua","Blue","Fuchsia","Gray","Green","Lime","Maroon","Navy","Olive","Orange","Purple","Red","Silver","Teal","White","Yellow"],He=function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,a=function e(a){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=Object(I.a)({id:a.id,name:a.name,Class:_e[i]},t);a.Items?(o.Def=i?"Phase":"Well",o.Items=a.Items.map((function(t){return e(t,++i)}))):(o.start=a.start,o.end=a.end,n&&(n.descendants=o.id),o.ancestors=null===(r=n)||void 0===r?void 0:r.id,n=o);return o};return e.map((function(e){return a(e)}))}(H.getPhases())},Fe=Object(ue.a)("list"),We=Object(ue.a)("data"),Be=function(){function e(t,n){Object(s.a)(this,e),Object.defineProperty(this,Fe,{writable:!0,value:void 0}),Object.defineProperty(this,We,{writable:!0,value:void 0}),this.nestedKey="";var a=f(t);this.nestedKey=n,Object(se.a)(this,We)[We]=a,Object(se.a)(this,Fe)[Fe]=function t(a,r){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=0;s<a.length;){var u=a[s++],d=n&&u[n]&&u[n].length>0;u[e.next]=d?u[n][0]:a[s]?a[s]:o,u[e.parent]=i,u[e.prev]=a[s-2]?a[s-2]:i,u[e.indexWithinParent]=s-1,r.set(u.id,u),d&&t(u[n],r,u,a[s])}return r}(a,new Map)}return Object(u.a)(e,[{key:"_getFutureIndex",value:function(t,n){var a=this.getItem(t),r=this.getItem(n);return a?a[e.indexWithinParent]:r?r[e.indexWithinParent]+1:0}},{key:"_getParentArr",value:function(e){return e?(e[this.nestedKey]=e[this.nestedKey]||[],e[this.nestedKey]):Object(se.a)(this,We)[We]}},{key:"_setChildToParent",value:function(e,t,n){var a=this._getParentArr(e);a.splice(t,0,n),this._updateIndexWithinParent(a)}},{key:"_updateIndexWithinParent",value:function(t){for(var n=0;n<t.length;){Object(se.a)(this,Fe)[Fe].get(t[n++].id)[e.indexWithinParent]=n-1}}},{key:"getItem",value:function(e){return Object(se.a)(this,Fe)[Fe].get(e)}},{key:"hasItem",value:function(e){return Object(se.a)(this,Fe)[Fe].has(e)}},{key:"removeItem",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasItem(t)){var a=this.getItem(t),r=a[e.parent],i=a[e.indexWithinParent];n&&Object(se.a)(this,Fe)[Fe].delete(t);var o=this._getParentArr(r);o.splice(i,1),this._updateIndexWithinParent(o)}}},{key:"addItem",value:function(t,n,a,r,i){if(this.hasItem(t))this.moveItem(t,n,a,r);else{var o=this.getItem(n),s=this._getFutureIndex(a,r),u=e.convertItemKeys(i);Object(se.a)(this,Fe)[Fe].set(t,u),u[e.parent]=o,this._setChildToParent(o,s,u)}}},{key:"moveItem",value:function(t,n,a,r){var i=this.getItem(t),o=this.getItem(n),s=this._getFutureIndex(a,r);this.removeItem(t,!1),i[e.parent]=o,this._setChildToParent(o,s,i)}},{key:"updateItem",value:function(t,n){if(this.hasItem(t)){var a=this.getItem(t),r=e.convertItemKeys(n);C()(a,r)}}},{key:"data",get:function(){return f(Object(se.a)(this,We)[We])}}],[{key:"convertItemKeys",value:function(e){return Object.entries(e).reduce((function(e,t){var n=Object(p.a)(t,2),a=n[0],r=n[1];return/^_|^f_|^[A-Z]_|Click|Error/.test(a)&&!/Span$/.test(a)||(r=function(e){return""===e?e:"0"===e?0:+e||e}(r),ce()(e,a,r)),e}),{})}}]),e}();Be.parent=Symbol("parent"),Be.next=Symbol("next"),Be.prev=Symbol("prev"),Be.indexWithinParent=Symbol("indexWithinParent");var Le=window.TGAddEvent,Ue=function(){var e=function(){var e,t={LeftCols:[{Name:"id"},{Name:"name"},{Name:"start",Type:"Date"},{Name:"end",Type:"Date"},{Name:"descendants",Range:1},{Name:"ancestors",Range:1}],Cols:(H.getStartTime(),[{Name:"GANTT",Type:"Gantt",GanttZoom:"days",GanttRunSave:2,GanttDataUnits:"h",GanttStart:"start",GanttEnd:"end",GanttRunAdjust:"Shrink",GanttHtml:"*name*",GanttTip:"*name*",GanttAncestors:"ancestors",GanttTask:"All,Box",GanttMarkIncorrectDependencies:"2",GanttMarkDisabledDependencies:"2",GanttCorrectDependencies:"0",GanttDragDependenciesBetween:"2",GanttAssignDependencies:"1"}]),Solid:(e=H.getStartTime(),[{id:"topBar",Space:-1,Cells:"OperationStartDate",OperationStartDate:e,OperationStartDateLabel:"Start operation: ",OperationStartDateWidth:120,OperationStartDateFormat:"yyyy-M-d H:mm",OperationStartDateType:"Date",OperationStartDateRecalc:256,OperationStartDateOnChange:"Grid.Component.props.handleOperationStartDateChange(Grid,Value)"}])};return A(Me,t)}(),t=He(),n=null,i=null;Object(a.useEffect)((function(){Le("OnDragGanttRun","GANTT",(function(e,t,a,r,o,s,u,d,c,l,h,p,m){var f=new Date(s).toString().substr(0,21);if(n)(i=n.Tag.getElementsByTagName("input")[0]).value=f;else{var v=(n=window.ShowDialog({Body:'<div style="display: flex; align-items: center;">\n            <input type="text" style="width: 140px" value="'.concat(f,'">\n            <button class="TSDateRight date" style="background-color: transparent;border: 0;width: 20px;height: 20px;padding: 0;cursor: pointer;"></button>\n            <button class="close" style="background-color: transparent;border: 0;width: 20px;height: 20px;padding: 0;cursor: pointer;">x</button>\n          </div>')},{X:p,Y:m+12})).Tag.getElementsByClassName("date")[0];n.Tag.getElementsByClassName("close")[0].addEventListener("click",(function(){n.Close(),n=null})),v.addEventListener("click",(function(){window.ShowCalendar({Date:s,HeadClose:1,TimeFormat:"HH:mm",OnSave:function(e){i.value=new Date(e).toString().substr(0,21)}},{X:p,Y:m})}))}})),Le("OnEndDragGanttRun","GANTT",(function(e,t,n,a,r,i){}))}),[]);return r.a.createElement(G,{id:"GANTT",ganttRunKey:"events",layout:e,body:t,onDataChanged:function(e){var t=new Be(H.data.PhasesAux,"Items");e.forEach((function(e){var n=e.events;e.CanEdit&&("string"===typeof n&&(n=Function("return ".concat(n))()),n.forEach((function(e){var n=e.Id,a=e.Start,r=e.Duration,i=e.Text;t.updateItem(n,{start:+new Date(a),hours:r,name:i})})))})),H.save("PhasesAux",t.data)}})},Ve=n(2),Ke=function(e){Object(d.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(l.a,null,r.a.createElement(h,null),r.a.createElement("div",{className:"views-container"},r.a.createElement(Ve.c,null,r.a.createElement(Ve.a,{path:"/",exact:!0},r.a.createElement(Ee,null)),r.a.createElement(Ve.a,{path:"/companies"},r.a.createElement(xe,null)),r.a.createElement(Ve.a,{path:"/highcharts-gant"},r.a.createElement(Re,null)),r.a.createElement(Ve.a,{path:"/tree-grid-gant"},r.a.createElement(ge,null)),r.a.createElement(Ve.a,{path:"/tree-grid-gant-v2"},r.a.createElement(Ue,null)))))}}]),n}(a.Component),Ze=document.getElementById("root");Ze&&o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ke,null)),Ze)},34:function(e,t,n){"use strict";n.r(t),t.default={Cfg:{FocusRect:1,SelectingCells:2,SelectingFocus:1,CopyCols:0,PasteFocused:4,ShowDeleted:0,NoVScroll:0},Actions:{OnCtrlDragRow:"DragSelected",OnDragRow:"FocusCells",OnDel:"!StartEditEmpty"},Toolbar:{Cells60Cfg:"Columns,Help",Cells70Styles:"Sizes"},Panel:{PanelCopyMenu:"CopyRowBelow,CopyRowsBelow@F,CopyTree,CopyRowsTreeBelow@F,CopySelected@S,CopySelectedTree@S,CopySelectedChildEnd,CopySelectedTreeChildEnd,-,AddRowBelow,AddRowsBelow@2,CopyEmptyBelow,CopyRowsEmptyBelow@2,CopySelectedEmpty,-,AddChildEnd,CopySelectedEmptyChildEnd"},Lang:{Format:{GroupSeparator:" ",GMT:0}}}},76:function(e){e.exports=JSON.parse('{"Name":"Daily cost","Units":"Metric","Comments":null,"OperationStartDate":1606550400000,"Phases":[{"name":"Well #1","id":"64029a29010","Items":[{"id":"e083fddb36aea4d6","name":"Phase 1","Items":[{"id":"1-1","name":"Event 1.1","hours":10,"comment":"","Def":"Event","DefEmpty":"Event","Spanned":1,"Recalc":256,"experienceLinks":"0|19585|P&A|1|19586||0|19587||0|12341||1|12341|","experienceTitle":"P&A;"},{"id":"1-2","Def":"Event","code":"","name":"Event 1.2","hours":24,"dsvHours":12,"nptHours":"","wowHours":"","contractor":"","comment":"","f_experienceLinks":"","experienceLinks":"0|19585|P&A|1|19586||0|19587||0|12341||1|12341|","unPtHours":"","plannedDepth":"","actualDepth":"","DefEmpty":"Event","Spanned":1,"Recalc":256}],"Def":"Phase","DefEmpty":"Phase"},{"id":"db36aea4d64029a2","name":"Phase 2","Items":[{"id":"2-1","name":"Event 2.1","hours":48,"comment":"","Def":"Event","DefEmpty":"Event","Spanned":1,"Recalc":256,"experienceLinks":"0|12341|P&A","experienceTitle":"P&A;"}],"Def":"Phase","DefEmpty":"Phase"},{"id":"aea4d64029a29010","Def":"Phase","name":"Phase 3","hours":480,"plannedDepth":"","actualDepth":"","Items":[{"id":"3-1","Def":"Event","name":"Event 3.1","hours":24,"nptHours":"","wowHours":"","comment":1,"plannedDepth":0,"actualDepth":"","DefEmpty":"Event","Spanned":1,"Recalc":256}],"DefEmpty":"Phase"}],"Def":"Well","DefEmpty":"Well"}],"Costs":[{"id":"d64029a290106a04","name":"24 USD cost","code":"","type":"intangible","unit":"day rate","currency":"USD","rate":24,"phases":{"e083fddb36aea4d6":{"afe":22},"db36aea4d64029a2":{"afe":14},"aea4d64029a29010":{"afe":123}},"populatedDays":{"2020-11-28":0.5833333,"2020-11-29":0.4166667,"2020-11-29/1":0.5,"2020-11-29/2":0.0006944,"2020-11-30":1.0826389,"2020-12-01":0.4166667},"Items":[],"days":{"2020-11-29/1":"","2020-11-29/2":"","2020-11-30":""},"_days":{"2020-11-29/1":"","2020-11-29/2":"","2020-11-30":""},"afterOffhire":"","populateDaily":1,"B_phases":{"aea4d64029a29010":{"afe":123}},"beforeOnHire":{"afe":12},"A_beforeOnHire":{"afe":1}}],"PhasesAux":[{"name":"Well #1","id":"4029a290106","Items":[{"id":"083fddb36aea4d64","name":"Phase Aux 1","Items":[{"id":"3fddb36aea4d6402","Def":"Event","name":"Event 1.1","DefEmpty":"Event","Spanned":1,"Recalc":256,"hours":12},{"id":"ddb36aea4d64029a","Def":"Event","name":"Event 1.2","DefEmpty":"Event","Spanned":1,"Recalc":256,"hours":12},{"id":"3addb36aea4d6402","Def":"Event","name":"Event 1.3","DefEmpty":"Event","Spanned":1,"Recalc":256,"hours":12},{"id":"d5b36aea4d64029a","Def":"Event","name":"Event 1.4","DefEmpty":"Event","Spanned":1,"Recalc":256,"hours":12}],"Def":"Phase","DefEmpty":"Phase"}],"Def":"Well","DefEmpty":"Well"}],"Companies":[]}')},84:function(e,t,n){e.exports=n(185)},89:function(e,t,n){},90:function(e,t,n){},95:function(e,t,n){}},[[84,3,4]]]);
//# sourceMappingURL=main.ed9a7dc0.chunk.js.map