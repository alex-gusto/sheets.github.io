(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[2],{157:function(e,t,a){var n={"./Defaults":[82,0],"./Defaults.js":[82,0],"./Text":[83,1],"./Text.js":[83,1],"./default-layout":[34],"./default-layout.js":[34]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=157,e.exports=r},185:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(72),o=a.n(i),s=a(1),u=a(3),d=a(13),c=a(12),l=(a(89),a(90),a(15)),h=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"navigationBar"},r.a.createElement("h3",null,"Navigation"),r.a.createElement("nav",{className:"navigationBarList"},r.a.createElement(l.b,{to:"/",className:"navItem"},"Time tracker"),r.a.createElement(l.b,{to:"/companies",className:"navItem"},"Companies"),r.a.createElement(l.b,{to:"/highcharts-gant",className:"navItem"},"Highcharts Gantt"),r.a.createElement(l.b,{to:"/tree-grid-gant",className:"navItem"},"TreeGrid gantt"),r.a.createElement(l.b,{to:"/tree-grid-gant-v2",className:"navItem"},"TreeGrid gantt v2")))}}]),a}(n.Component),p=(a(95),a(7)),m=a(5),f=function(e){return JSON.parse(JSON.stringify(e))},v=a(74),g=a.n(v),y=a(21),C=a.n(y),D={isEmpty:function(e){return""===e},isNotEmpty:function(e){return""!==e},isNumber:function(e){return"number"===typeof e&&!isNaN(e)}},S=window,E=S.TreeGrid;S.Grids.OnCustomAjax=function(e,t,n,r){return t.Url?a(157)("./".concat(t.Url)).then((function(e){var t=e.default;return r(0,t)})).catch((function(e){return e})):e.OnDataChanged(e,JSON.parse(e.GetChanges()),r),!0};var O={onDataChanged:g.a,nestedKey:"Items",body:[],Def:"R",DefEmpty:"R",DefParent:"R",Validator:null},b=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).$el=Object(n.createRef)(),e.grid=null,e.gridBody=e.prepareBody(e.props.body),e.dataManager=new Worker("/sheets.github.io/ManageData.worker.js"),e.subscribeGridEvents=function(){e.grid.OnDataChanged=function(t,a,n){var r=a.Changes,i=e.props,o=i.body,s=i.nestedKey,u=i.Validator,d=[],c=[];if(u){var l=new u(t).validate(r),h=Object(p.a)(l,2);d=h[0],c=h[1]}var m=c.length;if(n(0,{IO:{Result:m?-1:0},Changes:m?c:d}),!m){t.AcceptChanges();e.dataManager.addEventListener("message",(function t(){var a;(a=e).onDataManagerMessage.apply(a,arguments),e.dataManager.removeEventListener("message",t)})),e.dataManager.postMessage(["update",{changes:r,data:o,nestedKey:s}])}}},e.onDataManagerMessage=function(t){if(Array.isArray(t.data)){var a=e.props.onDataChanged,n=Object(p.a)(t.data,2),r=n[0],i=n[1];switch(r){case"updated":a(i.data);break;case"error":console.error("Worker error: ",i.data);break;default:console.debug("Worker: event not found!")}}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.initGrid(),this.subscribeGridEvents()}},{key:"componentWillUnmount",value:function(){this.dataManager.terminate(),this.grid&&this.grid.Dispose()}},{key:"initGrid",value:function(){var e=this.props,t=e.layout,a=e.id,n=C()({},t);this.grid=E({Debug:0,id:a,Layout:{Data:n},Upload:{Format:"JSON",Flags:"Spanned",Type:"Changes,Span,Gantt"},Data:{Data:{Body:[this.gridBody]}}},this.$el.current,{Component:this,Helpers:D})}},{key:"prepareBody",value:function(e){var t=this.props,a=t.nestedKey,n=t.Def,r=t.DefParent,i=t.DefEmpty;return e.map((function e(t){return t[a]&&t[a].length?(t.Def=t.Def||r,t.Items=t[a].map(e)):t.Def=t.Def||n,t.DefParent=t.DefParent||r,t.DefEmpty=t.DefEmpty||i,t}))}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.$el,style:{height:"100%",width:"100%"}})}}]),a}(n.Component);b.defaultProps=O;var G=b,T=a(75),P=a.n(T),j=a(34),x=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return P.a.apply(void 0,[{},j.default].concat(t,[function(e,t){if(Array.isArray(e))return t.concat(e)}]))},A={Cfg:{ShowDeleted:"0",AutoSort:"0",DateStrings:"1",ReloadChanged:"3",MainCol:"name",NoVScroll:1,Sorting:0,AutoUpdate:1,StandardFilter:3,SaveExpanded:1,PersistentCfg:2,Filtered:0,RoundNumbers:1,RoundNumbersDigits:2,Size:"Small",Undo:32,RowIndex:"Pos",SearchLap:1,FilterLap:1,Validate:"Changed,Messages",Sync:"Horz,Vert",SyncId:"TimeTracker",ExportType:"Expanded,Outline,Indent,ForceBorder,TextType,Strings,FixedRows,Size"},Toolbar:{Cells30Manipulate:"Undo,Redo,Add,AddChild,Calc,Outdent,Indent,ExpandAll,CollapseAll"},Def:{R:{Expanded:1}},DefCols:{C:{CanFilter:0}},Root:{AcceptDef:"Well",CDef:"Well"},Panel:{Copy:1,Delete:1,Select:1,Move:1},MenuPrint:{Items:"ColsCaption,Cols,SpaceCaption,RowsCaption,Foot,OptionsCaption,Options,SizeCaption,Size",Attribute:"CanPrint",HideUnused:"1"}};var I=a(11);function k(e,t){var a=e.GetPrev(t);if(a)return"Event"!==a.Def.Name?k(e,a):a}var w=a(45),R=a.n(w),M=a(76),N=a.n(M);function _(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.find((function(e){return R()(e)&&!N()(e)}))}var H=a(77),F=a.n(H),W=a(22),B=function(){function e(){Object(s.a)(this,e),this._changes={}}return Object(u.a)(e,[{key:"getChange",value:function(e){return this._changes[e]||(this._changes[e]={id:e}),this._changes[e]}},{key:"addError",value:function(t,a,n){var r=this.getChange(t),i=e.getMessages(r,a);i.push(n),r[e.getErrorKey(a)]=i}},{key:"removeError",value:function(e,t){this.addError(e,t,"")}},{key:"getChanges",value:function(){return Object.values(this._changes).reduce((function(e,t){var a={};return Object.entries(t).forEach((function(e){var t=Object(p.a)(e,2),n=t[0],r=t[1];Array.isArray(r)?a[n]=r.find((function(e){return e}))||"":a[n]=r})),[].concat(Object(W.a)(e),[a])}),[])}}],[{key:"getErrorKey",value:function(e){return"".concat(e,"Error")}},{key:"getMessages",value:function(t,a){return t[e.getErrorKey(a)]||[]}}]),e}(),L=function(){function e(t){if(Object(s.a)(this,e),this.validChanges=null,this.invalidChanges=null,this.rules={},!t)throw new Error("TreeGrid validator: Set related grid!");this.grid=t}return Object(u.a)(e,[{key:"_getRow",value:function(e){return this.grid.GetRowById(e)}},{key:"forEachRule",value:function(e){Object.entries(this.rules).forEach((function(t){var a=Object(p.a)(t,2),n=a[0],r=a[1];return e(n,r)}))}},{key:"validate",value:function(e){var t=this;return this.validChanges=new B,this.invalidChanges=new B,e.forEach((function(e){t.forEachRule((function(a,n){a in e&&n.call(t,e)}))})),[this.validChanges.getChanges(),this.invalidChanges.getChanges()]}}]),e}(),U=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).layout=e.createLayout(),e.getEventStart=function(t,a,n){var r=k(t,a);return r?n(r,"_end"):e.props.OperationStartDate},e.getEventEnd=function(e,t){return e&&"number"===typeof t?e+t:""},e.getEventDuration=function(){var e=_.apply(void 0,arguments);return F()(e)?"":36e5*e},e.getPlannedDepth=function(e,t,a,n){if(e.Helpers.isNotEmpty(n))return n;var r=k(e,t);return r?a(r,"_plannedDepth"):0},e.getActualDepth=function(t,a,n,r){if(t.Helpers.isNotEmpty(r))return r;if(!e.hasActual(t,a))return"";var i=k(t,a);return i?n(i,"_actualDepth"):0},e.getBehindHours=function(t,a,n,r){if(!e.hasActual(t,a))return"";var i=k(t,a);return(i?n(i,"behindHours"):0)+r},e.hasActual=function(e,t){return e.Helpers.isNotEmpty(t.actualHours)},e}return Object(u.a)(a,[{key:"createLayout",value:function(){var e=this.props,t=e.OperationStartDate,a=e.isAux,n=e.DerrickType,r={LeftCols:[{Name:"code",CanFilter:1,MinWidth:60,CaseSensitive:0},{Name:"name",RelWidth:1,MinWidth:250,CanFilter:1,CaseSensitive:0}]};return r.Cols=function(e){e.isAux;return[{Name:"hours",MinWidth:80,CanEmpty:1,Format:",0.00",EditFormat:"",Type:"Float"},{Name:"_eventDuration",Type:"Float",Visible:0,CanHide:0,CanPrint:0,CanExport:0,Formula:"Grid.Component.props.getEventDuration(hours)"},{Name:"start",Visible:0,CanHide:0,CanPrint:0,CanExport:0},{Name:"_start",Format:"yyyy-M-d H:mm",Type:"Date",CanEdit:1,OnChange:'Grid.SetValue(Row, "start", Value, 1)',ClassFormula:'Grid.Helpers.isEmpty(start) && "TSClassReadOnly"',Formula:"start ? start : Grid.Component.props.getEventStart(Grid, Row, Get)",MinWidth:120},{Name:"_end",Format:"yyyy-M-d H:mm",Type:"Date",MinWidth:120,Formula:"Grid.Component.props.getEventEnd(_start, _eventDuration)"}]}({isAux:a}),r.Head=function(){var e={Pos:"Pos",name:"Name",code:"Code",hours:"Hours",_start:"Start",_end:"End"};return Object.keys(e).forEach((function(t){return function(e,t){t["".concat(e,"Align")]="Center"}(t,e)})),e.id="Header",[e]}(),r.Foot=[{id:"Total",Color:"#D0E6F5",CanDelete:0,CanEdit:0,Calculated:1,code:"SUM",hoursFormula:"sum()",_startFormula:"",_endFormula:'Grid.GetLast() ? Get(Grid.GetLast(), "_end") : ""'}],r.Solid=function(e){var t=e.OperationStartDate;e.DerrickType;return e.isAux?[{id:"topBarAux",Visible:0,Cells:"OperationStartDate",OperationStartDate:t,OperationStartDateRecalc:256}]:[{id:"topBar",Space:-1,Tag:"timeGridTopBar",Cells:"OperationStartDate",OperationStartDate:t,OperationStartDateLabel:"Start operation: ",OperationStartDateWidth:120,OperationStartDateFormat:"yyyy-M-d H:mm",OperationStartDateType:"Date",OperationStartDateRecalc:256,OperationStartDateOnChange:"Grid.Component.props.handleOperationStartDateChange(Grid,Value)"}]}({OperationStartDate:t,isAux:a,DerrickType:n}),r.Def=function(){var e={CanEdit:0,Calculated:1,nameCanEdit:1,codeCanEdit:1,hoursFormula:"sum()",_startFormula:'Row.firstChild ? Get(Row.firstChild, "_start") : ""',_endFormula:'Row.lastChild ? Get(Row.lastChild, "_end") : ""'};return{Well:Object(I.a)({CDef:"Phase",AcceptDef:"Phase",Class:"time-grid-well",Color:"#d7d7d7"},e),Phase:Object(I.a)({CDef:"Event",AcceptDef:"Event",Class:"time-grid-phase",Color:"#f0f0f0"},e),Event:{AcceptDef:"",CalcOrder:["nameClass","_tftHours","_plannedDepth","_plannedDepthClass","_actualDepth","_actualDepthClass","_eventDuration","_start","_startClass","_end"].join()}}}(),x(A,r)}},{key:"render",value:function(){return r.a.createElement(G,Object.assign({layout:this.layout,nestedKey:a.nestedKey,getBehindHours:this.getBehindHours,getActualDepth:this.getActualDepth,getPlannedDepth:this.getPlannedDepth,getEventEnd:this.getEventEnd,getEventStart:this.getEventStart,getEventDuration:this.getEventDuration,Validator:L},this.props))}}]),a}(n.Component),V=a(78),K=a(46),Z=a.n(K);function z(e,t){var a=null;return e.map((function(e){return function e(n,r){var i={name:n.name,id:n.id,hours:n.hours};return n.Items?i.Items=n.Items.map((function(t){return e(t,i)})):(i.start=n.start?n.start:a?a.end:t,i.end=i.start+60*n.hours*60*1e3,a=i),r?(r.start||(r.start=i.start),r.end=i.end||r.end,i):i}(e)}))}var J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=function e(a,n,r){return t===r?(a.push(n),a):(r<t&&n.Items&&n.Items.forEach((function(t){return e(a,t,r+1)})),a)};return e.reduce((function(e,t){return a(e,t,0)}),[])},Y=function(){function e(){if(Object(s.a)(this,e),this.data=this.getFromLS()||V,e.instance)return e.instance;window.DataService=this,e.instance=this}return Object(u.a)(e,[{key:"save",value:function(e,t){if(!e)throw new Error("No key at save method");this.data[e]=t,this.saveToLS()}},{key:"saveToLS",value:function(){localStorage.setItem("data",JSON.stringify(this.data))}},{key:"getFromLS",value:function(){try{return JSON.parse(localStorage.getItem("data"))}catch(e){return null}}},{key:"getStartTime",value:function(){return this.data.OperationStartDate}},{key:"getPhases",value:function(){return z(this.data.Phases,this.getStartTime())}},{key:"getPhasesAux",value:function(){return z(this.data.PhasesAux,this.getStartTime())}},{key:"getOnlyPhases",value:function(){return J(this.getPhases(),e.PHASE_LEVEL)}},{key:"getOnlyEvents",value:function(){return J(this.getPhases(),e.EVENT_LEVEL)}},{key:"getOnlyEventsAux",value:function(){return J(this.getPhasesAux(),e.EVENT_LEVEL)}},{key:"getCompanies",value:function(){return this.data.Companies}},{key:"getCosts",value:function(){return this.data.Costs}},{key:"getDays",value:function(){for(var e=function e(t){return t.reduce((function(t,a){return a.Items?t+e(a.Items):t+(a.hours||0)}),0)}(this.data.Phases),t=this.getStartTime(),a=[];e>0;){var n=Z()(t+60*e*60*1e3);a.push(n.format("YYYY_MM_DD")),e-=24}return a}}]),e}();Y.WELL_LEVEL=0,Y.PHASE_LEVEL=1,Y.EVENT_LEVEL=2;var $=new Y,X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(t,"_").concat(e)},q=function(e){return X(e.id,"start")},Q=function(e){return X(e.id,"end")},ee=function(e,t){return"".concat("G").concat(e).concat(t||"")},te={Cfg:{AutoUpdate:1,Undo:32,NoVScroll:1,FastGantt:1,GanttStyle:"Standard"},Zoom:[{Name:"months",GanttUnits:"d",GanttWidth:"50",GanttDragUnits:"h",GanttChartRound:"d",GanttHeader1:"M#MMMM yyyy"},{Name:"days",GanttUnits:"h",GanttWidth:"8",GanttDragUnits:"m",GanttChartRound:"d",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h6#HH"},{Name:"hours",GanttUnits:"h",GanttWidth:"25",GanttDragUnits:"m",GanttChartRound:"h",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h#HH"},{Name:"minutes",GanttUnits:"m",GanttWidth:"2",GanttDragUnits:"s",GanttChartRound:"h",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h#HH",GanttHeader3:"m15#mm"}],Toolbar:{Visible:0,Cells05:"Zoom",ZoomType:"SelectGanttZoom",ZoomWidth:"90"}},ae=function(){var e=$.getOnlyEventsAux(),t={id:"Header",Spanned:1},a={Kind:"Header"};return e.forEach((function(e,n){var r,i,o=q(e);Object.assign(t,(r={},Object(m.a)(r,o,e.name),Object(m.a)(r,"".concat(o,"Span"),2),r)),Object.assign(a,(i={},Object(m.a)(i,q(e),"Start"),Object(m.a)(i,Q(e),"End"),i))})),[t,a]},ne=["Aqua","Blue","Fuchsia","Gray","Green","Lime","Maroon","Navy","Olive","Orange","Purple","Red","Silver","Teal","White","Yellow"],re=function(e){return e.reduce((function(e,t,a){return e[ee("GanttHtml",a)]=t.name,e[ee("GanttClass",a)]=ne[a],e[ee("GanttStart",a)]=t.start,e[ee("GanttEnd",a)]=t.end,e}),{})},ie=function(){var e=re($.getOnlyEvents()),t=(re($.getOnlyEventsAux()),$.getOnlyEventsAux().map((function(e,t){return{Id:e.id,Start:e.start,Duration:e.hours,Class:ne[t],Text:e.name}})));return console.log(t),[Object(I.a)({id:"24029a29010",title:"Main events",CanEdit:0},e),{id:"TimeTrackerAux",title:"Aux events",events:t}]},oe=a(4),se=a(23),ue=a(36),de=a.n(ue),ce=Object(se.a)("list"),le=Object(se.a)("data"),he=function(){function e(t,a){Object(s.a)(this,e),Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,le,{writable:!0,value:void 0}),this.nestedKey="";var n=f(t);this.nestedKey=a,Object(oe.a)(this,le)[le]=n,Object(oe.a)(this,ce)[ce]=function t(n,r){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=0;s<n.length;){var u=n[s++],d=a&&u[a]&&u[a].length>0;u[e.next]=d?u[a][0]:n[s]?n[s]:o,u[e.parent]=i,u[e.prev]=n[s-2]?n[s-2]:i,u[e.indexWithinParent]=s-1,r.set(u.id,u),d&&t(u[a],r,u,n[s])}return r}(n,new Map)}return Object(u.a)(e,[{key:"_getFutureIndex",value:function(t,a){var n=this.getItem(t),r=this.getItem(a);return n?n[e.indexWithinParent]:r?r[e.indexWithinParent]+1:0}},{key:"_getParentArr",value:function(e){return e?(e[this.nestedKey]=e[this.nestedKey]||[],e[this.nestedKey]):Object(oe.a)(this,le)[le]}},{key:"_setChildToParent",value:function(e,t,a){var n=this._getParentArr(e);n.splice(t,0,a),this._updateIndexWithinParent(n)}},{key:"_updateIndexWithinParent",value:function(t){for(var a=0;a<t.length;){Object(oe.a)(this,ce)[ce].get(t[a++].id)[e.indexWithinParent]=a-1}}},{key:"getItem",value:function(e){return Object(oe.a)(this,ce)[ce].get(e)}},{key:"hasItem",value:function(e){return Object(oe.a)(this,ce)[ce].has(e)}},{key:"removeItem",value:function(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasItem(t)){var n=this.getItem(t),r=n[e.parent],i=n[e.indexWithinParent];a&&Object(oe.a)(this,ce)[ce].delete(t);var o=this._getParentArr(r);o.splice(i,1),this._updateIndexWithinParent(o)}}},{key:"addItem",value:function(t,a,n,r,i){if(this.hasItem(t))this.moveItem(t,a,n,r);else{var o=this.getItem(a),s=this._getFutureIndex(n,r),u=e.convertItemKeys(i);Object(oe.a)(this,ce)[ce].set(t,u),u[e.parent]=o,this._setChildToParent(o,s,u)}}},{key:"moveItem",value:function(t,a,n,r){var i=this.getItem(t),o=this.getItem(a),s=this._getFutureIndex(n,r);this.removeItem(t,!1),i[e.parent]=o,this._setChildToParent(o,s,i)}},{key:"updateItem",value:function(t,a){if(this.hasItem(t)){var n=this.getItem(t),r=e.convertItemKeys(a);C()(n,r)}}},{key:"data",get:function(){return f(Object(oe.a)(this,le)[le])}}],[{key:"convertItemKeys",value:function(e){return Object.entries(e).reduce((function(e,t){var a=Object(p.a)(t,2),n=a[0],r=a[1];return/^_|^f_|^[A-Z]_|Click|Error/.test(n)&&!/Span$/.test(n)||(r=function(e){return""===e?e:"0"===e?0:+e||e}(r),de()(e,n,r)),e}),{})}}]),e}();he.parent=Symbol("parent"),he.next=Symbol("next"),he.prev=Symbol("prev"),he.indexWithinParent=Symbol("indexWithinParent");a(70);var pe=[{Name:"Text",CanSort:0},{Name:"Start",Type:"Date",MinWidth:80,CanSort:0},{Name:"Duration",Type:"Float",MinWidth:80,CanSort:0},{Name:"End",Type:"Date",MinWidth:80,CanSort:0,Formula:"Start + Duration * 1000 * 60 * 60"}];function me(e){return Function("return ".concat(e))()}var fe=function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.id,r=a.colName,i=void 0===r?"events":r;Object(s.a)(this,e),this.createPopupLayout=function(e){var a=me(e);return console.log(a),{Toolbar:{Cells:"Cancel,Ok",AddOnClick:"AddRowEnd",Cancel:"Cancel",CancelButton:"Button",CancelOnClick:"Grid.ParentDialog.Close(); return 1;",Ok:"Save",OkButton:"Button",OkOnClick:'Grids["'.concat(t.gridId,'"].Component.props.handleRunEditorSave(Grid); Grid.ParentDialog.Close(); return 1;')},Cols:pe,Body:[a]}},this.onStartEdit=function(e,a,n){var r=e.GetValue(a,t.colName);return e.ShowPopupGrid(a,n,t.createPopupLayout(r))},this.onSave=function(e){if(e.HasChanges()){e.EndEdit(1);var t=e.ParentDialog.Row,a=e.ParentGrid;JSON.parse(e.GetChanges()).Changes.forEach((function(e){var n=a.GetGanttRunBox(t,"G",e.id);console.log(n,e),console.log(a.SetGanttRunBox(Object.assign(n,e)))}))}},this.gridId=n,this.colName=i},ve=(window.TGAddEvent,function(){var e=Object(n.useRef)(new fe({id:"GANTT"})),t=Object(n.useMemo)((function(){return function(){var e,t={Head:ae(),Cols:[],LeftCols:[{Name:"title",Visible:0},{Name:"events",Width:80,Visible:0,Button:"Enum",OnClick:"Focus,Grid.Component.props.handleRunColStartEdit(Grid,Row, Col)"}],RightCols:($.getStartTime(),[{Name:"G",Type:"Gantt",GanttZoom:"days",GanttDataUnits:"h",GanttCount:10,GanttRunSave:2,GanttRun:"events",GanttRunAdjust:"Shrink"}]),Solid:(e=$.getStartTime(),[{id:"topBar",Space:-1,Cells:"OperationStartDate",OperationStartDate:e,OperationStartDateLabel:"Start operation: ",OperationStartDateWidth:120,OperationStartDateFormat:"yyyy-M-d H:mm",OperationStartDateType:"Date",OperationStartDateRecalc:256,OperationStartDateOnChange:"Grid.Component.props.handleOperationStartDateChange(Grid,Value)"}])};return x(te,t)}()}),[]),a=Object(n.useMemo)((function(){return ie()}),[]);return r.a.createElement(G,{id:"GANTT",ganttRunKey:"events",layout:t,body:a,onDataChanged:function(e){e.forEach((function(e){var t=e.events,a=e.CanEdit,n=e.id,r=window.Grids[n];r&&(r.StartUpdate(),0!==a&&("string"===typeof t&&(t=Function("return ".concat(t))()),t.forEach((function(e){var t=e.Id,a=e.Start,n=e.Duration,i=e.Text;if(e.State){var o=r.GetRowById(t);r.SetValue(o,"start",+new Date(a)),r.SetValue(o,"hours",+n),r.SetValue(o,"name",i)}})),r.EndUpdate()))}))},handleRunEditorSave:function(){var t;return(t=e.current).onSave.apply(t,arguments)},handleRunColStartEdit:function(){var t;return(t=e.current).onStartEdit.apply(t,arguments)}})}),ge=window.TGSetEvent,ye={start:["Start",function(e){return e}],hours:["Duration",function(e){return 60*e*60*1e3}],name:["Text",function(e){return e}]},Ce=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onDataChanged=function(e,t){n.setState(Object(m.a)({},t,e),(function(){$.save(t,e)}))},n.handleOperationStartDateChange=function(e,t){n.setState({OperationStartDate:t})},n.handleDerrickTypeChange=function(e,t){n.setState({DerrickType:t})},n.state={DerrickType:1,Phases:n.prepareState($.data.Phases),PhasesAux:n.prepareState($.data.PhasesAux),OperationStartDate:$.getStartTime()},ge("OnSave","TimeTrackerAux",(function(e){var t=JSON.parse(e.GetChanges()).Changes,a=window.Grids.GANTT,n=a.GetRowById("TimeTrackerAux");t.forEach((function(e){var t=a.GetGanttRunBox(n,"G",e.id);Object.entries(e).forEach((function(e){var a=Object(p.a)(e,2),n=a[0],r=a[1],i=ye[n];if(i){var o=Object(p.a)(i,2),s=o[0],u=o[1];t[s]=u(r)}})),t.End=null,console.log(a.SetGanttRunBox(t,"Resize"))}))})),n}return Object(u.a)(a,[{key:"prepareState",value:function(e){var t=f(e),a=["Well","Phase","Event"],n=[3,3,256];return t.forEach((function(e){return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.Def=a[r],t.Recalc=n[r],t.Items&&t.Items.forEach((function(t){return e(t,r+1)}))}(e,0)})),t}},{key:"render",value:function(){var e=this,t=this.state,a=t.DerrickType,n=t.Phases,i=t.PhasesAux,o=t.OperationStartDate;return r.a.createElement("div",{className:"time-grid-view"},r.a.createElement(ve,null),r.a.createElement("div",{id:"timeGridTopBar",className:"time-grid-view__top-bar"}),r.a.createElement("div",{className:"time-grid-view__grids"},r.a.createElement(U,{id:"TimeTrackerMain",body:n,DerrickType:a,OperationStartDate:o,handleDerrickTypeChange:this.handleDerrickTypeChange,handleOperationStartDateChange:this.handleOperationStartDateChange,onDataChanged:function(t){return e.onDataChanged(t,"Phases")}}),a?r.a.createElement(U,{id:"TimeTrackerAux",isAux:!0,body:i,DerrickType:a,OperationStartDate:o,onDataChanged:function(t){return e.onDataChanged(t,"PhasesAux")}}):""))}}]),a}(n.Component),De={Cfg:{Dragging:1,HideZero:1,Size:"Small",ShowDeleted:0,AutoSort:0,RowIndex:"Pos",Filtered:0,RoundNumbers:1,RoundNumbersDigits:2,ExportType:"Expanded,Outline,Indent,ForceBorder,TextType,Strings,FixedRows,Size",PrintPageOrientation:1,PrintPageSize:7,Undo:32,ColPaging:2,NoVScroll:1,Alternate:2,AutoUpdate:1},Def:{Comment:{CanEdit:0,CanCopy:0,CanDelete:0,CanSelect:0,CanDrag:0}},Toolbar:{Cells30Manipulate:"Undo,Redo",Cells20Data:"Print,ExportPDF,Export,Columns",Cells60Cfg:"Help"},Panel:{Select:1,Copy:1,Delete:1,Move:1},MenuExport:{Items:"ColsCaption,Cols,RowsCaption,OptionsCaption,Options",Attribute:"CanExport",HideUnused:1},MenuPrint:{Items:"ColsCaption,Cols,SpaceCaption,RowsCaption,OptionsCaption,Options,SizeCaption,Size",Attribute:"CanPrint",HideUnused:"1"}},Se=["in","out","onboard"],Ee=function(e){return[{Name:"prior"}].concat(Object(W.a)(e.map((function(e){return Se.map((function(t){return{Name:"".concat(e,"_").concat(t),Width:60}}))})).flat()))},Oe=a(79),be=a.n(Oe),Ge=a(80),Te=function(e){var t={Kind:"Header",Spanned:1,name:"Name",nameAlign:"Center"},a={Kind:"Header"},n={Def:"Comment",Spanned:1,name:"Comments",nameAlign:"Center",nameVertAlign:"middle",nameRowSpan:10};e.forEach((function(e){var r,i="".concat(e,"_in");Object.assign(t,(r={},Object(m.a)(r,i,e.replaceAll("_","-")),Object(m.a)(r,"".concat(i,"Span"),3),Object(m.a)(r,"".concat(i,"Align"),"Center"),r)),Se.forEach((function(t){var n;return Object.assign(a,(n={},Object(m.a)(n,"".concat(e,"_").concat(t),t.toUpperCase()),Object(m.a)(n,"".concat(e,"_").concat(t,"Align"),"Center"),n))})),Object.assign(n,Object(m.a)({},"".concat(i,"Span"),3))}));var r=Array.from({length:10}).map((function(){return Object(I.a)({},n)}));return e.forEach((function(e){var t=be()(0,9);r[t]["".concat(e,"_in")]=Object(Ge.loremIpsum)()})),[t].concat(Object(W.a)(r),[t,Object(I.a)(Object(I.a)({},a),{},{id:"Header"})])},Pe=function(e){var t={Pos:"To",Spanned:1},a={Pos:"From",Spanned:1};return e.forEach((function(e){var n="".concat(e,"_in");Object.assign(t,Object(m.a)({},"".concat(n,"Span"),3)),Object.assign(a,Object(m.a)({},"".concat(n,"Span"),3))})),[t,a]},je=function(){var e=$.getDays(),t={Foot:Pe(e),Head:Te(e),LeftCols:[{Name:"name",Spanned:1}],Cols:Ee(e)};return x(De,t)},xe=function(){var e=Object(n.useState)($.getCompanies()),t=Object(p.a)(e,2),a=t[0],i=t[1],o=Object(n.useMemo)(je,[]);return r.a.createElement(G,{id:"Companies",layout:o,onDataChanged:function(e){i(e),$.save("Companies",e)},body:a})},Ae=a(17),Ie=a.n(Ae),ke=a(81),we=a.n(ke);a(183)(Ie.a),a(184)(Ie.a);var Re=function(){var e=new Date;e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),e=e.getTime();var t=null,a=$.getStartTime(),i=$.getPhases().reduce((function(e,n){return function e(n,r){return r.Items?r.Items.reduce((function(t,a){return e(t,a)}),n):(r.end=(r.start||a)+60*r.hours*60*1e3,r.start=t?t.end:a,r.y=0,t=r,n.push(r)),n}(e,n)}),[]);console.log(i);var o=Object(n.useState)({title:{text:"Intraday jobs Scheduling"},xAxis:{currentDateIndicator:!0},yAxis:{categories:["Main","Aux"]},plotOptions:{series:{dragDrop:{draggableX:!0,dragMinY:0,dragMaxY:2,dragPrecisionX:6e4},dataLabels:{enabled:!0,format:"{point.name}"},allowPointSelect:!0,point:{events:{drag:function(e){console.log(e)}}}}},series:[{name:"Init M1, Import FIRT market data",data:i}]}),s=Object(p.a)(o,1)[0];return r.a.createElement(we.a,{containerProps:{style:{height:"100%"}},highcharts:Ie.a,constructorType:"ganttChart",options:s})},Me={Cfg:{AutoUpdate:1,MainCol:"name",Size:"Small",GanttStyle:"Standard"},Def:{Well:{GANTTGanttClass:"Blue",Calculated:1,startFormula:"ganttstart()",endFormula:"ganttend()"},Phase:{GANTTGanttClass:"Aqua",Calculated:1,startFormula:"ganttstart()",endFormula:"ganttend()"},R:{DefEmpty:"R",DefParent:"Sum"}},Zoom:[{Name:"months",GanttUnits:"d",GanttWidth:"50",GanttDragUnits:"h",GanttChartRound:"d",GanttHeader1:"M#MMMM yyyy"},{Name:"days",GanttUnits:"h",GanttWidth:"8",GanttDragUnits:"m",GanttChartRound:"d",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h6#HH"},{Name:"hours",GanttUnits:"h",GanttWidth:"25",GanttDragUnits:"m",GanttChartRound:"h",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h#HH"},{Name:"minutes",GanttUnits:"m",GanttWidth:"2",GanttDragUnits:"s",GanttChartRound:"h",GanttHeader1:"d#dddd dddddd MMMM yyyy",GanttHeader2:"h#HH",GanttHeader3:"m15#mm"}],Toolbar:{Cells05:"Zoom",ZoomType:"SelectGanttZoom",ZoomWidth:"90"}},Ne=["Aqua","Blue","Fuchsia","Gray","Green","Lime","Maroon","Navy","Olive","Orange","Purple","Red","Silver","Teal","White","Yellow"],_e=function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null,n=function e(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=Object(I.a)({id:n.id,name:n.name,Class:Ne[i]},t);n.Items?(o.Def=i?"Phase":"Well",o.Items=n.Items.map((function(t){return e(t,++i)}))):(o.start=n.start,o.end=n.end,a&&(a.descendants=o.id),o.ancestors=null===(r=a)||void 0===r?void 0:r.id,a=o);return o};return e.map((function(e){return n(e)}))}($.getPhases())},He=Object(se.a)("list"),Fe=Object(se.a)("data"),We=function(){function e(t,a){Object(s.a)(this,e),Object.defineProperty(this,He,{writable:!0,value:void 0}),Object.defineProperty(this,Fe,{writable:!0,value:void 0}),this.nestedKey="";var n=f(t);this.nestedKey=a,Object(oe.a)(this,Fe)[Fe]=n,Object(oe.a)(this,He)[He]=function t(n,r){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=0;s<n.length;){var u=n[s++],d=a&&u[a]&&u[a].length>0;u[e.next]=d?u[a][0]:n[s]?n[s]:o,u[e.parent]=i,u[e.prev]=n[s-2]?n[s-2]:i,u[e.indexWithinParent]=s-1,r.set(u.id,u),d&&t(u[a],r,u,n[s])}return r}(n,new Map)}return Object(u.a)(e,[{key:"_getFutureIndex",value:function(t,a){var n=this.getItem(t),r=this.getItem(a);return n?n[e.indexWithinParent]:r?r[e.indexWithinParent]+1:0}},{key:"_getParentArr",value:function(e){return e?(e[this.nestedKey]=e[this.nestedKey]||[],e[this.nestedKey]):Object(oe.a)(this,Fe)[Fe]}},{key:"_setChildToParent",value:function(e,t,a){var n=this._getParentArr(e);n.splice(t,0,a),this._updateIndexWithinParent(n)}},{key:"_updateIndexWithinParent",value:function(t){for(var a=0;a<t.length;){Object(oe.a)(this,He)[He].get(t[a++].id)[e.indexWithinParent]=a-1}}},{key:"getItem",value:function(e){return Object(oe.a)(this,He)[He].get(e)}},{key:"hasItem",value:function(e){return Object(oe.a)(this,He)[He].has(e)}},{key:"removeItem",value:function(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasItem(t)){var n=this.getItem(t),r=n[e.parent],i=n[e.indexWithinParent];a&&Object(oe.a)(this,He)[He].delete(t);var o=this._getParentArr(r);o.splice(i,1),this._updateIndexWithinParent(o)}}},{key:"addItem",value:function(t,a,n,r,i){if(this.hasItem(t))this.moveItem(t,a,n,r);else{var o=this.getItem(a),s=this._getFutureIndex(n,r),u=e.convertItemKeys(i);Object(oe.a)(this,He)[He].set(t,u),u[e.parent]=o,this._setChildToParent(o,s,u)}}},{key:"moveItem",value:function(t,a,n,r){var i=this.getItem(t),o=this.getItem(a),s=this._getFutureIndex(n,r);this.removeItem(t,!1),i[e.parent]=o,this._setChildToParent(o,s,i)}},{key:"updateItem",value:function(t,a){if(this.hasItem(t)){var n=this.getItem(t),r=e.convertItemKeys(a);C()(n,r)}}},{key:"data",get:function(){return f(Object(oe.a)(this,Fe)[Fe])}}],[{key:"convertItemKeys",value:function(e){return Object.entries(e).reduce((function(e,t){var a=Object(p.a)(t,2),n=a[0],r=a[1];return/^_|^f_|^[A-Z]_|Click|Error/.test(n)&&!/Span$/.test(n)||(r=function(e){return""===e?e:"0"===e?0:+e||e}(r),de()(e,n,r)),e}),{})}}]),e}();We.parent=Symbol("parent"),We.next=Symbol("next"),We.prev=Symbol("prev"),We.indexWithinParent=Symbol("indexWithinParent");var Be=window.TGAddEvent,Le=function(){var e=function(){var e,t={LeftCols:[{Name:"id"},{Name:"name"},{Name:"start",Type:"Date"},{Name:"end",Type:"Date"},{Name:"descendants",Range:1},{Name:"ancestors",Range:1}],Cols:($.getStartTime(),[{Name:"GANTT",Type:"Gantt",GanttZoom:"days",GanttRunSave:2,GanttDataUnits:"h",GanttStart:"start",GanttEnd:"end",GanttRunAdjust:"Shrink",GanttHtml:"*name*",GanttTip:"*name*",GanttAncestors:"ancestors",GanttTask:"All,Box",GanttMarkIncorrectDependencies:"2",GanttMarkDisabledDependencies:"2",GanttCorrectDependencies:"0",GanttDragDependenciesBetween:"2",GanttAssignDependencies:"1"}]),Solid:(e=$.getStartTime(),[{id:"topBar",Space:-1,Cells:"OperationStartDate",OperationStartDate:e,OperationStartDateLabel:"Start operation: ",OperationStartDateWidth:120,OperationStartDateFormat:"yyyy-M-d H:mm",OperationStartDateType:"Date",OperationStartDateRecalc:256,OperationStartDateOnChange:"Grid.Component.props.handleOperationStartDateChange(Grid,Value)"}])};return x(Me,t)}(),t=_e(),a=null,i=null;Object(n.useEffect)((function(){Be("OnDragGanttRun","GANTT",(function(e,t,n,r,o,s,u,d,c,l,h,p,m){var f=new Date(s).toString().substr(0,21);if(a)(i=a.Tag.getElementsByTagName("input")[0]).value=f;else{var v=(a=window.ShowDialog({Body:'<div style="display: flex; align-items: center;">\n            <input type="text" style="width: 140px" value="'.concat(f,'">\n            <button class="TSDateRight date" style="background-color: transparent;border: 0;width: 20px;height: 20px;padding: 0;cursor: pointer;"></button>\n            <button class="close" style="background-color: transparent;border: 0;width: 20px;height: 20px;padding: 0;cursor: pointer;">x</button>\n          </div>')},{X:p,Y:m+12})).Tag.getElementsByClassName("date")[0];a.Tag.getElementsByClassName("close")[0].addEventListener("click",(function(){a.Close(),a=null})),v.addEventListener("click",(function(){window.ShowCalendar({Date:s,HeadClose:1,TimeFormat:"HH:mm",OnSave:function(e){i.value=new Date(e).toString().substr(0,21)}},{X:p,Y:m})}))}})),Be("OnEndDragGanttRun","GANTT",(function(e,t,a,n,r,i){}))}),[]);return r.a.createElement(G,{id:"GANTT",ganttRunKey:"events",layout:e,body:t,onDataChanged:function(e){var t=new We($.data.PhasesAux,"Items");e.forEach((function(e){var a=e.events;e.CanEdit&&("string"===typeof a&&(a=Function("return ".concat(a))()),a.forEach((function(e){var a=e.Id,n=e.Start,r=e.Duration,i=e.Text;t.updateItem(a,{start:+new Date(n),hours:r,name:i})})))})),$.save("PhasesAux",t.data)}})},Ue=a(2),Ve=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(l.a,null,r.a.createElement(h,null),r.a.createElement("div",{className:"views-container"},r.a.createElement(Ue.c,null,r.a.createElement(Ue.a,{path:"/",exact:!0},r.a.createElement(Ce,null)),r.a.createElement(Ue.a,{path:"/companies"},r.a.createElement(xe,null)),r.a.createElement(Ue.a,{path:"/highcharts-gant"},r.a.createElement(Re,null)),r.a.createElement(Ue.a,{path:"/tree-grid-gant"},r.a.createElement(ve,null)),r.a.createElement(Ue.a,{path:"/tree-grid-gant-v2"},r.a.createElement(Le,null)))))}}]),a}(n.Component),Ke=document.getElementById("root");Ke&&o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ve,null)),Ke)},34:function(e,t,a){"use strict";a.r(t),t.default={Cfg:{FocusRect:1,SelectingCells:2,SelectingFocus:1,CopyCols:0,PasteFocused:4,ShowDeleted:0,NoVScroll:0},Actions:{OnCtrlDragRow:"DragSelected",OnDragRow:"FocusCells",OnDel:"!StartEditEmpty"},Toolbar:{Cells60Cfg:"Columns,Help",Cells70Styles:"Sizes"},Panel:{PanelCopyMenu:"CopyRowBelow,CopyRowsBelow@F,CopyTree,CopyRowsTreeBelow@F,CopySelected@S,CopySelectedTree@S,CopySelectedChildEnd,CopySelectedTreeChildEnd,-,AddRowBelow,AddRowsBelow@2,CopyEmptyBelow,CopyRowsEmptyBelow@2,CopySelectedEmpty,-,AddChildEnd,CopySelectedEmptyChildEnd"},Lang:{Format:{GroupSeparator:" ",GMT:0}}}},78:function(e){e.exports=JSON.parse('{"Name":"Daily cost","Units":"Metric","Comments":null,"OperationStartDate":1606550400000,"Phases":[{"name":"Well #1","id":"64029a29010","Items":[{"id":"e083fddb36aea4d6","name":"Phase 1","Items":[{"id":"1-1","name":"Event 1.1","hours":10,"comment":"","Def":"Event","DefEmpty":"Event","Spanned":1,"Recalc":256,"experienceLinks":"0|19585|P&A|1|19586||0|19587||0|12341||1|12341|","experienceTitle":"P&A;"},{"id":"1-2","Def":"Event","code":"","name":"Event 1.2","hours":24,"dsvHours":12,"nptHours":"","wowHours":"","contractor":"","comment":"","f_experienceLinks":"","experienceLinks":"0|19585|P&A|1|19586||0|19587||0|12341||1|12341|","unPtHours":"","plannedDepth":"","actualDepth":"","DefEmpty":"Event","Spanned":1,"Recalc":256}],"Def":"Phase","DefEmpty":"Phase"},{"id":"db36aea4d64029a2","name":"Phase 2","Items":[{"id":"2-1","name":"Event 2.1","hours":48,"comment":"","Def":"Event","DefEmpty":"Event","Spanned":1,"Recalc":256,"experienceLinks":"0|12341|P&A","experienceTitle":"P&A;"}],"Def":"Phase","DefEmpty":"Phase"},{"id":"aea4d64029a29010","Def":"Phase","name":"Phase 3","hours":480,"plannedDepth":"","actualDepth":"","Items":[{"id":"3-1","Def":"Event","name":"Event 3.1","hours":24,"nptHours":"","wowHours":"","comment":1,"plannedDepth":0,"actualDepth":"","DefEmpty":"Event","Spanned":1,"Recalc":256}],"DefEmpty":"Phase"}],"Def":"Well","DefEmpty":"Well"}],"Costs":[{"id":"d64029a290106a04","name":"24 USD cost","code":"","type":"intangible","unit":"day rate","currency":"USD","rate":24,"phases":{"e083fddb36aea4d6":{"afe":22},"db36aea4d64029a2":{"afe":14},"aea4d64029a29010":{"afe":123}},"populatedDays":{"2020-11-28":0.5833333,"2020-11-29":0.4166667,"2020-11-29/1":0.5,"2020-11-29/2":0.0006944,"2020-11-30":1.0826389,"2020-12-01":0.4166667},"Items":[],"days":{"2020-11-29/1":"","2020-11-29/2":"","2020-11-30":""},"_days":{"2020-11-29/1":"","2020-11-29/2":"","2020-11-30":""},"afterOffhire":"","populateDaily":1,"B_phases":{"aea4d64029a29010":{"afe":123}},"beforeOnHire":{"afe":12},"A_beforeOnHire":{"afe":1}}],"PhasesAux":[{"name":"Well #1","id":"4029a290106","Items":[{"id":"083fddb36aea4d64","name":"Phase Aux 1","Items":[{"id":"3fddb36aea4d6402","Def":"Event","name":"Event 1.1","DefEmpty":"Event","Spanned":1,"Recalc":256,"hours":12},{"id":"ddb36aea4d64029a","Def":"Event","name":"Event 1.2","DefEmpty":"Event","Spanned":1,"Recalc":256,"hours":12},{"id":"3addb36aea4d6402","Def":"Event","name":"Event 1.3","DefEmpty":"Event","Spanned":1,"Recalc":256,"hours":12},{"id":"d5b36aea4d64029a","Def":"Event","name":"Event 1.4","DefEmpty":"Event","Spanned":1,"Recalc":256,"hours":12}],"Def":"Phase","DefEmpty":"Phase"}],"Def":"Well","DefEmpty":"Well"}],"Companies":[]}')},84:function(e,t,a){e.exports=a(185)},89:function(e,t,a){},90:function(e,t,a){},95:function(e,t,a){}},[[84,3,4]]]);
//# sourceMappingURL=main.f807314b.chunk.js.map