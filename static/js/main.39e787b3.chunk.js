(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{270:function(e){e.exports=JSON.parse('{"Name":"Daily cost","Units":"Metric","Comments":null,"OperationStartDate":1606550400000,"Phases":[{"name":"Well #1","id":"64029a29010","Items":[{"id":"e083fddb36aea4d6","name":"Phase 1","Items":[{"id":"1-1","name":"Event 1.1","afeHours":12,"targetHours":12.234242423422343,"dsvHours":12,"comment":"","Def":"Event","DefEmpty":"Event","Spanned":1,"Recalc":256,"experienceLinks":"0|19585|P&A|1|19586||0|19587||0|12341||1|12341|","experienceTitle":"P&A;","actualHours":12},{"id":"1-2","Def":"Event","code":"","name":"Event 1.12","afeHours":12,"targetHours":12.234242423422343,"dsvHours":12,"actualHours":12,"nptHours":"","wowHours":"","contractor":"","comment":"","f_experienceLinks":"","experienceLinks":"0|19585|P&A|1|19586||0|19587||0|12341||1|12341|","unPtHours":"","plannedDepth":"","actualDepth":"","start":"","DefEmpty":"Event","Spanned":1,"Recalc":256,"f_start":"11/28/2020 22:00"}],"Def":"Phase","DefEmpty":"Phase"},{"id":"db36aea4d64029a2","name":"Phase 2","Items":[{"id":"2-1","name":"Event 2.1","afeHours":14,"targetHours":14.234242423422343,"dsvHours":14,"comment":"","Def":"Event","DefEmpty":"Event","Spanned":1,"Recalc":256,"experienceLinks":"0|12341|P&A","experienceTitle":"P&A;","actualHours":12}],"Def":"Phase","DefEmpty":"Phase"},{"id":"aea4d64029a29010","Def":"Phase","name":"Phase 3","afeHours":13,"targetHours":12.234242423422343,"dsvHours":13,"actualHours":12,"nptHours":0,"wowHours":0,"plannedDepth":"","actualDepth":"","Items":[{"id":"3-1","Def":"Event","name":"Event 3.1","afeHours":12,"targetHours":12.234242423422343,"dsvHours":13,"actualHours":12,"nptHours":"","wowHours":"","comment":1,"plannedDepth":0,"actualDepth":"","DefEmpty":"Event","Spanned":1,"Recalc":256,"f_start":"11/30/2020 20:00","start":1606766400000}],"DefEmpty":"Phase"}],"Def":"Well","DefEmpty":"Well"}],"Costs":[{"id":"d64029a290106a04","name":"24 USD cost","code":"","type":"intangible","unit":"day rate","currency":"USD","rate":24,"phases":{"e083fddb36aea4d6":{"afe":22},"db36aea4d64029a2":{"afe":14},"aea4d64029a29010":{"afe":123}},"populatedDays":{"2020-11-28":0.5833333,"2020-11-29":0.4166667,"2020-11-29/1":0.5,"2020-11-29/2":0.0006944,"2020-11-30":1.0826389,"2020-12-01":0.4166667},"Items":[],"days":{"2020-11-29/1":"","2020-11-29/2":"","2020-11-30":""},"_days":{"2020-11-29/1":"","2020-11-29/2":"","2020-11-30":""},"afterOffhire":"","populateDaily":1,"B_phases":{"aea4d64029a29010":{"afe":123}},"beforeOnHire":{"afe":12},"A_beforeOnHire":{"afe":1}}],"PhasesAux":[{"name":"Well #1","id":"4029a290106","Items":[{"id":"083fddb36aea4d64","Items":[{"id":"3fddb36aea4d6402","Def":"Event","DefEmpty":"Event","Spanned":1,"Recalc":256,"afeHours":12,"codeRowSpan":2,"nameRowSpan":2,"afeHoursRowSpan":2,"targetHoursRowSpan":2,"dsvHoursRowSpan":2,"actualHoursRowSpan":2,"nptHoursRowSpan":2,"wowHoursRowSpan":2,"f_tftHoursRowSpan":2,"f_unPtHoursRowSpan":2,"f_iltHoursRowSpan":2,"f_plannedDepthRowSpan":2,"f_actualDepthRowSpan":2,"f_startRowSpan":2,"f_endRowSpan":2,"behindHoursRowSpan":2,"contractorRowSpan":2,"commentRowSpan":2,"f_experienceLinksRowSpan":2,"experienceLinksRowSpan":2,"unPtHoursRowSpan":2,"plannedDepthRowSpan":2,"actualDepthRowSpan":2,"startRowSpan":2,"f_eventDurationRowSpan":2,"f_deltaAfeActualRowSpan":2},{"id":"ddb36aea4d64029a","Def":"Event","DefEmpty":"Event","Spanned":1,"Recalc":256}],"Def":"Phase","DefEmpty":"Phase"},{"id":"b36aea4d64029a29","Items":[{"id":"6aea4d64029a2901","Def":"Event","DefEmpty":"Event","Spanned":1,"Recalc":256}],"Def":"Phase","DefEmpty":"Phase"},{"id":"ea4d64029a290106","Items":[{"id":"4d64029a290106a0","Def":"Event","DefEmpty":"Event","Spanned":1,"Recalc":256}],"Def":"Phase","DefEmpty":"Phase"}],"Def":"Well","DefEmpty":"Well"}]}')},289:function(e,t,a){e.exports=a(433)},294:function(e,t,a){},329:function(e,t,a){},356:function(e,t,a){},357:function(e,t,a){},363:function(e,t,a){},428:function(e,t,a){var n={"./Defaults":[286,0],"./Defaults.js":[286,0],"./Text":[287,1],"./Text.js":[287,1],"./default-layout":[288,2],"./default-layout.js":[288,2]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=428,e.exports=r},433:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a.n(n),o=a(91),i=a.n(o),l=a(56),s=a(57),d=a(74),u=a(73),c=(a(294),a(270)),p=new(function(){function e(){Object(l.a)(this,e),this.data=c}return Object(s.a)(e,[{key:"getPhases",value:function(){return this.data.Phases}},{key:"getCosts",value:function(){return this.data.Costs}}]),e}()),m=a(284),h=function(e){var t=performance.now();try{e()}catch(a){console.log(a)}return(performance.now()-t).toFixed(2)},f=(a(328),a(329),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).initTable=function(){r.hot=new m.a(r.tableRef.current,{data:p.getPhases(),nestedRows:!0,colHeaders:!0,rowHeaders:!0,autoRowSize:!0,stretchH:"all",height:"500px",width:"100%",persistentState:!0,nestedHeaders:[[{label:"Identification",colspan:2},{label:"Duration [h]",colspan:7},{label:"End Depth [mMD]",colspan:2},{label:"Timing",colspan:3},{label:"Annotation",colspan:2}],["Code","Name","AFE","Target","DSV","Actual","NPT","WOW","TFT","Planned","Actual","Start","End","Days -ahead/+behind","Contractor","Comment"]],columns:[{data:"code"},{data:"name"},{data:"afeHours",type:"numeric",numericFormat:{pattern:"0,0.00"},allowEmpty:!0,width:80},{data:"targetHours",type:"numeric",numericFormat:{pattern:"0,0.00"},allowEmpty:!0,width:80},{data:"dsvHours",type:"numeric",numericFormat:{pattern:"0,0.00"},allowEmpty:!0,width:80},{data:"actualHours",type:"numeric",numericFormat:{pattern:"0,0.00"},allowEmpty:!0,width:80},{data:"nptHours",type:"numeric",numericFormat:{pattern:"0,0.00"},allowEmpty:!0,width:80},{data:"wowHours",type:"numeric",numericFormat:{pattern:"0,0.00"},allowEmpty:!0,width:80},{data:"tftHours",type:"numeric",numericFormat:{pattern:"0,0.00"},allowEmpty:!0,width:80},{data:"plannedDepth",type:"numeric",numericFormat:{pattern:"0,0.00"},allowEmpty:!0,width:80},{data:"actualDepth",type:"numeric",numericFormat:{pattern:"0,0.00"},allowEmpty:!0,width:80},{data:"start",type:"date",correctFormat:!0,allowEmpty:!0},{data:"end",type:"date",correctFormat:!0,allowEmpty:!0},{data:"behindHours",type:"numeric",allowEmpty:!0,width:80},{data:"contractor",type:"numeric",allowEmpty:!0,width:80},{data:"comments"}],contextMenu:!0,bindRowsWithHeaders:"strict",manualRowMove:!0}),r.hot.updateSettings({cells:function(e,t,a){var n=[],r=!1,o=this.instance.getDataAtRowProp(this.visualRow,"isTotal");if(this.instance.getDataAtRowProp(this.visualRow,"group")?(r=!0,n.push("group-cell")):o?(r=!0,n.push("total-cell")):n.push("leaf-cell"),r&&n.push("locked-cell"),!o){var i=this.instance.getDataAtRowProp(this.visualRow,"start"),l=this.instance.getDataAtRowProp(this.visualRow,"overriddenStart"),s=+new Date;(+new Date(i)<s||+new Date(l)<s)&&n.push("parked-cell")}return this.readOnly=r,this.className=n.join(" "),this}})},r.tableRef=Object(n.createRef)(),r.state={time:0},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=h(this.initTable);this.setState({time:e});var t=document.querySelector("#hot-display-license-info");t&&t.remove()}},{key:"componentWillUnmount",value:function(){var e=document.querySelector("#hot-display-license-info");e&&e.remove()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("h3",null,"Handsontable render performance: ",r.a.createElement("span",{style:{color:"tomato"}},this.state.time,"ms")),r.a.createElement("div",{ref:this.tableRef,style:{overflow:"hidden",flex:"1 1 auto",fontSize:"11px"}}))}}]),a}(n.Component));var y=function(){var e=-1;return function t(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a.forEach((function(a){n.push(a),e++,a.__children&&(r.push({index:e,count:a.__children.length}),t(a.__children,n,r),delete a.__children)})),{data:n,groups:r}}},g=(a(330),window.GC);function v(e){for(var t,a="";e>0;)t=(e-1)%26,a=String.fromCharCode(t+65)+a,e=(e-t-1)/26;return a}var w=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).initSpread=function(){var e=new g.Spread.Sheets.Workbook(r.tableRef.current,{sheetCount:1});e.options.tabStripVisible=!1,e.options.tabNavigationVisible=!1,e.options.tabEditable=!0,e.options.newTabVisible=!1;var t=e.getActiveSheet(),a=g.Spread.Sheets;t.suspendPaint();var n=y()(p.getPhases()),o=n.data,i=n.groups;t.options.isProtected=!0,t.autoGenerateColumns=!1,t.setDataSource(o),t.setRowCount(2,a.SheetArea.colHeader),t.addSpan(0,0,1,2,a.SheetArea.colHeader),t.setValue(0,0,"Identification",a.SheetArea.colHeader),t.addSpan(0,2,1,6,a.SheetArea.colHeader),t.setValue(0,2,"Duration",a.SheetArea.colHeader),t.addSpan(0,8,1,2,a.SheetArea.colHeader),t.setValue(0,8,"End Depth",a.SheetArea.colHeader),t.addSpan(0,10,1,3,a.SheetArea.colHeader),t.setValue(0,10,"Timing",a.SheetArea.colHeader),t.addSpan(0,13,1,2,a.SheetArea.colHeader),t.setValue(0,13,"Annotation",a.SheetArea.colHeader),t.bindColumn(0,{name:"code",displayName:"Code"}),t.bindColumn(1,{name:"name",displayName:"Name"}),t.bindColumn(2,{name:"afeHours",displayName:"AFE",formatter:"0.00",size:80}),t.bindColumn(3,{name:"targetHours",displayName:"Target",formatter:"0.00",size:80}),t.bindColumn(4,{name:"dsvHours",displayName:"DSV",formatter:"0.00",size:80}),t.bindColumn(5,{name:"actualHours",displayName:"Actual",formatter:"0.00",size:80}),t.bindColumn(6,{name:"nptHours",displayName:"NPT",formatter:"0.00",size:80}),t.bindColumn(7,{name:"tftHours",displayName:"TFT",formatter:"0.00",size:80}),t.bindColumn(8,{name:"plannedDepth",displayName:"Planned",formatter:"0.00",size:80}),t.bindColumn(9,{name:"actualDepth",displayName:"Actual",formatter:"0.00",size:80}),t.bindColumn(10,{name:"start",displayName:"Start",formatter:"DD-MM-yyyy HH:mm"}),t.bindColumn(11,{name:"end",displayName:"End",formatter:"DD-MM-yyyy HH:mm"}),t.bindColumn(12,{name:"behindHours",displayName:"Behind hours",formatter:"0.00",size:100}),t.bindColumn(13,{name:"contractor",displayName:"Contractor",size:200}),t.bindColumn(14,{name:"comments",displayName:"Comment",size:200}),t.setColumnCount(15);var l=new a.Style;l.backColor="#f6f6f6",l.cellPadding="0 2";var s=t.getRowCount();t.addRows(t.getRowCount(a.SheetArea.viewport),1),t.setStyle(s,1,l,a.SheetArea.viewport),t.setValue(s,1,"Total");var d=t.getColumnCount(),u=i.map((function(e){return e.index+1}));i.forEach((function(e){for(var n,r=e.index,o=e.count,i=d;i>=0;){if(t.setStyle(r,i,l,a.SheetArea.viewport),t.getCell(r,i,a.SheetArea.viewport).borderLeft(new a.LineBorder("#ccc",a.LineStyle.thin)).borderRight(new a.LineBorder("#ccc",a.LineStyle.thin)).borderTop(new a.LineBorder("#ccc",a.LineStyle.thin)).borderBottom(new a.LineBorder("#ccc",a.LineStyle.thin)),i>1&&i<8){var c=v(i+1),p=r+2,m=r+o+1,h="=SUM(".concat(c).concat(p,":").concat(c).concat(m,")");t.setFormula(r,i,h),t.setFormula(s,i,"=SUM(".concat("".concat(n=c).concat(u.join(",".concat(n))),")"))}i--}new a.CellRange(t,r+1,0,o,d).locked(!1),t.rowOutlines.group(r+1,o),t.rowOutlines.expand(0,!1),t.rowOutlines.direction(a.Outlines.OutlineDirection.backward)})),t.autoFitColumn(1),t.autoFitColumn(10),t.autoFitColumn(11),t.resumePaint()},r.tableRef=Object(n.createRef)(),r.state={time:0},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t=h(e.initSpread);e.setState({time:t})}))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("h3",null,"SpreadJS render performance: ",r.a.createElement("span",{style:{color:"tomato"}},this.state.time,"ms")),r.a.createElement("div",{ref:this.tableRef,style:{height:"100%",width:"100%"}}))}}]),a}(n.Component),D=a(275);a(356);window.assignDataToNestedGrid=function(e,t,a){t&&t.querySelector("zing-grid").setData(JSON.stringify(e))};var E=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).initTable=function(){var e=window.performance.now(),t=y()(p.getPhases()).data;new D.a(r.tabelEl.current,{data:t,columns:[{index:"code",width:80},{index:"name"},{index:"afeHours",type:"number",header:"AFE",width:80},{index:"targetHours",type:"number",header:"Target",width:80},{index:"dsvHours",type:"number",header:"DSV",width:80},{index:"nptHours",type:"number",header:"NPT",width:80},{index:"wowHours",type:"number",header:"WOW",width:80},{index:"tftHours",type:"number",header:"TFT",width:80},{index:"plannedDepth",type:"number",header:"Planned",width:80},{index:"actualDepth",type:"number",header:"Actual",width:80}],editor:!0,layout:"row",loading:!0,height:"600px",loadByScroll:!0}).addEventListener("grid:ready",(function(t){var a=(window.performance.now()-e).toFixed(2);r.setState({time:a})}))},r.tabelEl=Object(n.createRef)(),r.state={time:0},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.initTable()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("h3",null,"Zing grid render performance: ",r.a.createElement("span",{style:{color:"tomato"}},this.state.time,"ms")),r.a.createElement("div",{ref:this.tabelEl}))}}]),a}(n.Component),C=a(147),b=(a(357),a(358),a(93)),S=a(285),H=a(30),O=a(103);function R(e){return function(e){return e instanceof H.GroupRow}(e)?e.level:-1}var F=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).gridRef=Object(n.createRef)(),r.state={costs:p.getCosts(),filter:"",time:0},r.initialWorkerGrid=function(e){r.workerGrid=e,e.formatItem.addHandler((function(e,t){if(t.panel===e.cells){var a=t.row,n=t.col,r=e.rows[a],o=e.columns[n];/days/.test(o.binding)&&r.hasChildren}})),e.itemFormatter=function(e,t,a,n){e.cellType,H.CellType.ColumnHeader};var t=(window.performance.now()-r._ts).toFixed(2);r.setState({time:t})},r.onCellEditEnding=function(e,t){console.log("edited")},r.updateGridStyles=function(){r.workerGrid.rows.forEach((function(e){e.hasChildren||(e.cssClass="wj-group--bg-white"),e.isReadOnly=e.hasChildren}))},r.onFilter=function(e){var t=e.target.value;r.setState((function(){var e=t.toLowerCase(),a=p.getCosts();return{costs:r.filter(e,a),filter:e}}),(function(){r.updateGridStyles()}))},r.onMenuItemClicked=function(e){var t=e.selectedValue,a=r[t];"function"===typeof a?a():console.log("Context Menu: no cmd found ",t)},r.addRow=function(){var e=r.workerGrid.selection.row,t=r.workerGrid.rows[e].dataItem;r.setState((function(e){var a=e.costs;return t.__children||(t.__children=[]),t.__children.push({name:"",code:"",days:{},populatedDays:{}}),{costs:Object(C.a)(a)}}),(function(){r.workerGrid.refresh(),r.updateGridStyles()}))},r.removeRow=function(){var e=r.workerGrid.selection.row,t=r.workerGrid.rows[e],a=function(e){var t=null,a=R(e);if(-1!==a){var n=e.index;do{n--,t=e.grid.rows[n]}while(R(t)>=a);return t}}(t);a&&r.setState((function(e){var n=e.costs,r=a.dataItem,o=t.dataItem,i=r.__children.findIndex((function(e){return e===o}));return i>=0&&r.__children.splice(i,1),{costs:Object(C.a)(n)}}),(function(){r.workerGrid.refresh(),r.updateGridStyles()}))},r.collapseAll=function(){r.workerGrid.collapseGroupsToLevel(0)},r.expandAll=function(){r.workerGrid.collapseGroupsToLevel(r.workerGrid.rows.maxGroupLevel+1)},r.onDraggedRow=function(e,t){console.log(t)},r.exportExcel=function(){var e=S.FlexGridXlsxConverter.save(r.workerGrid,{includeColumnHeaders:!0,includeRowHeaders:!0});e.sheets[0].name="FlexGrid Data",e.saveAsync("FlexGrid-Export.xlsx")},r._ts=window.performance.now(),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.updateGridStyles(),this.workerGrid.collapseGroupsToLevel(0),this.workerGrid.rowAdded.addHandler((function(){e.updateGridStyles()})),this.workerGrid.deletedRow.addHandler((function(t,a){e.updateGridStyles()})),this.workerGrid.deletingRow.addHandler((function(e,t){}))}},{key:"filter",value:function(e,t){if(""===e)return t;var a=["name","code"];function n(t,r){var o=function(t){if(a.map((function(e){return t[e]})).filter((function(e){return e})).some((function(t){return t.toLowerCase().includes(e)})))return t;if(t.__children&&t.__children.length){var r=Object.assign({},t),o=t.__children.reduce(n,[]);if(o.length)return r.__children=o,r}return null}(r);return o&&t.push(o),t}return t.reduce(n,[])}},{key:"render",value:function(){var e=this.state,t=e.costs,a=e.filter,n=e.time,o=["days.2015-06-22","days.2015-06-27","days.2015-07-05","days.2015-07-11"].map((function(e){return r.a.createElement(b.b,{binding:e,header:e.replace("days.",""),key:e,allowResizing:!1})}));return r.a.createElement("div",{className:"cost-view"},r.a.createElement("h3",null,"Wijmo Grid render performance: ",r.a.createElement("span",{style:{color:"tomato"}},n,"ms")),r.a.createElement("input",{type:"text",value:a,placeholder:"Filter",className:"form-control",style:{marginBottom:"20px"},onChange:this.onFilter}),r.a.createElement(b.a,{ref:this.gridRef,itemsSource:t,selectionMode:"Row",autoGenerateColumns:!1,childItemsPath:"__children",frozenColumns:7,isReadOnly:!1,allowSorting:!1,allowDragging:"Rows",allowAddNew:!0,initialized:this.initialWorkerGrid,cellEditEnding:this.onCellEditEnding,draggedRow:this.onDraggedRow},r.a.createElement(b.b,{binding:"name",header:"Name",width:"2*",minWidth:200,isReadOnly:!1}),r.a.createElement(b.b,{binding:"code",header:"Code"}),r.a.createElement(b.b,{binding:"type",header:"Type",dataMap:["tangible","intangible","consumable"]}),r.a.createElement(b.b,{binding:"unit",header:"Unit",dataMap:["day rate","lump sum","unit cost","depth based"]}),r.a.createElement(b.b,{binding:"rate",header:"Rate"}),r.a.createElement(b.b,{binding:"currency",header:"Currency",dataMap:["AUD","EUR","GBP","NOK","USD"]}),r.a.createElement(b.b,{binding:"populateDaily",header:"Populate Daily",format:"n*"}),r.a.createElement(b.b,{binding:"prior",header:"Before onhire"}),o,r.a.createElement(b.b,{binding:"afterOffhire",header:"After offhire"})),r.a.createElement(O.a,{contextMenuOf:this.gridRef,header:"Context Menu",selectedValuePath:"cmd",dropDownCssClass:"ctx-menu",itemClicked:this.onMenuItemClicked},r.a.createElement(O.b,{cmd:"addRow"},"Add row"),r.a.createElement(O.b,{cmd:"removeRow"},"Remove row"),r.a.createElement(O.c,null),r.a.createElement(O.b,{cmd:"collapseAll"},"Collapse all"),r.a.createElement(O.b,{cmd:"expandAll"},"Expand all"),r.a.createElement(O.c,null),r.a.createElement(O.b,{cmd:"exportExcel"},"Export Excel")))}}]),a}(n.Component),_=(a(363),a(114)),k=a(277),A=a.n(k),T=a(278),x=a.n(T),G={isEmpty:function(e){return""===e},isNotEmpty:function(e){return""!==e},isNumber:function(e){return"number"===typeof e&&!isNaN(e)}},P=window,N=P.TreeGrid;P.Grids.OnCustomAjax=function(e,t,n,r){return t.Url?a(428)("./".concat(t.Url)).then((function(e){var t=e.default;return r(0,t)})).catch((function(e){return e})):e.OnDataChanged(e,JSON.parse(e.GetChanges()),r),!0};var j={onDataChanged:A.a,nestedKey:"__children",body:[],Def:"R",DefEmpty:"R",DefParent:"R",Validator:null},M=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).$el=Object(n.createRef)(),e.grid=null,e.gridBody=e.prepareBody(e.props.body),e.dataManager=new Worker("/sheets.github.io/ManageData.worker.js"),e.subscribeGridEvents=function(){e.grid.OnDataChanged=function(t,a,n){var r=a.Changes,o=e.props,i=o.body,l=o.nestedKey,s=o.Validator,d=[],u=[];if(s){var c=new s(t).validate(r),p=Object(_.a)(c,2);d=p[0],u=p[1]}var m=u.length;if(n(0,{IO:{Result:m?-1:0},Changes:m?u:d}),!m){t.AcceptChanges();e.dataManager.addEventListener("message",(function t(){var a;(a=e).onDataManagerMessage.apply(a,arguments),e.dataManager.removeEventListener("message",t)})),e.dataManager.postMessage(["update",{changes:r,data:i,nestedKey:l}])}}},e.onDataManagerMessage=function(t){if(Array.isArray(t.data)){var a=e.props.onDataChanged,n=Object(_.a)(t.data,2),r=n[0],o=n[1];switch(r){case"updated":a(o.data);break;case"error":console.error("Worker error: ",o.data);break;default:console.debug("Worker: event not found!")}}},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.initGrid(),this.subscribeGridEvents()}},{key:"componentWillUnmount",value:function(){this.dataManager.terminate(),this.grid&&this.grid.Dispose()}},{key:"initGrid",value:function(){var e=this.props,t=e.layout,a=e.id,n=x()({},t);this.grid=N({Debug:0,id:a,Layout:{Data:n},Upload:{Format:"JSON",Flags:"Spanned",Type:"Changes,Span",Tag:"grid"},Data:{Data:{Body:[this.gridBody]}}},this.$el.current,{Component:this,Helpers:G})}},{key:"prepareBody",value:function(e){var t=this.props,a=t.nestedKey,n=t.Def,r=t.DefParent,o=t.DefEmpty;return e.map((function e(t){return t[a]&&t[a].length?(t.Def=t.Def||r,t.Items=t[a].map(e)):t.Def=t.Def||n,t.DefParent=t.DefParent||r,t.DefEmpty=t.DefEmpty||o,t}))}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.$el,style:{height:"100%",width:"100%"}})}}]),a}(n.Component);M.defaultProps=j;var W=M,L=a(279),V=a.n(L),I={Cfg:{ShowDeleted:"0",AutoSort:"0",DateStrings:"1",ReloadChanged:"3",MainCol:"name",NoVScroll:0,Sorting:0,AutoUpdate:1,StandardFilter:3,SaveExpanded:1,PersistentCfg:2,Filtered:0,RoundNumbers:1,RoundNumbersDigits:2,Size:"Small",Undo:32,RowIndex:"Pos",SearchLap:1,FilterLap:1,Validate:"Changed,Messages",Sync:"Horz,Vert",SyncId:"TimeTracker",ExportType:"Expanded,Outline,Indent,ForceBorder,TextType,Strings,FixedRows,Size"},Toolbar:{Cells30Manipulate:"Undo,Redo,Add,AddChild,Calc,Outdent,Indent,ExpandAll,CollapseAll"},Def:{R:{Expanded:1}},DefCols:{C:{CanFilter:0}},Root:{AcceptDef:"Well",CDef:"Well"},Panel:{Copy:1,Delete:1,Select:1,Move:1}};var B=a(210);function z(e,t){var a=e.GetPrev(t);if(a)return"Event"!==a.Def.Name?z(e,a):a}var U=a(206),J=a.n(U),K=a(280),q=a.n(K);function $(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.find((function(e){return J()(e)&&!q()(e)}))}var X=a(281),Z=a.n(X),Q=function(){function e(){Object(l.a)(this,e),this._changes={}}return Object(s.a)(e,[{key:"getChange",value:function(e){return this._changes[e]||(this._changes[e]={id:e}),this._changes[e]}},{key:"addError",value:function(t,a,n){var r=this.getChange(t),o=e.getMessages(r,a);o.push(n),r[e.getErrorKey(a)]=o}},{key:"removeError",value:function(e,t){this.addError(e,t,"")}},{key:"getChanges",value:function(){return Object.values(this._changes).reduce((function(e,t){var a={};return Object.entries(t).forEach((function(e){var t=Object(_.a)(e,2),n=t[0],r=t[1];Array.isArray(r)?a[n]=r.find((function(e){return e}))||"":a[n]=r})),[].concat(Object(C.a)(e),[a])}),[])}}],[{key:"getErrorKey",value:function(e){return"".concat(e,"Error")}},{key:"getMessages",value:function(t,a){return t[e.getErrorKey(a)]||[]}}]),e}(),Y=function(){function e(t){if(Object(l.a)(this,e),this.validChanges=null,this.invalidChanges=null,this.rules={},!t)throw new Error("TreeGrid validator: Set related grid!");this.grid=t}return Object(s.a)(e,[{key:"_getRow",value:function(e){return this.grid.GetRowById(e)}},{key:"forEachRule",value:function(e){Object.entries(this.rules).forEach((function(t){var a=Object(_.a)(t,2),n=a[0],r=a[1];return e(n,r)}))}},{key:"validate",value:function(e){var t=this;return this.validChanges=new Q,this.invalidChanges=new Q,e.forEach((function(e){t.forEachRule((function(a,n){a in e&&n.call(t,e)}))})),[this.validChanges.getChanges(),this.invalidChanges.getChanges()]}}]),e}(),ee=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).layout=e.createLayout(),e.getEventStart=function(t,a,n){var r=z(t,a);return r?n(r,"_end"):e.props.OperationStartDate},e.getEventEnd=function(e,t){return e&&"number"===typeof t?e+t:""},e.getEventDuration=function(){var e=$.apply(void 0,arguments);return Z()(e)?"":36e5*e},e.getPlannedDepth=function(e,t,a,n){if(e.Helpers.isNotEmpty(n))return n;var r=z(e,t);return r?a(r,"_plannedDepth"):0},e.getActualDepth=function(t,a,n,r){if(t.Helpers.isNotEmpty(r))return r;if(!e.hasActual(t,a))return"";var o=z(t,a);return o?n(o,"_actualDepth"):0},e.getBehindHours=function(t,a,n,r){if(!e.hasActual(t,a))return"";var o=z(t,a);return(o?n(o,"behindHours"):0)+r},e.hasActual=function(e,t){return e.Helpers.isNotEmpty(t.actualHours)},e}return Object(s.a)(a,[{key:"createLayout",value:function(){var e=this.props,t=e.OperationStartDate,a=e.isAux,n=e.DerrickType,r={};return r.LeftCols=[{Name:"code",CanFilter:1,MinWidth:60,CaseSensitive:0},{Name:"name",RelWidth:1,MinWidth:250,CanFilter:1,CaseSensitive:0}],r.Cols=[{Name:"targetHours",MinWidth:80,CanEmpty:1,Format:",0.00",Type:"Float"},{Name:"dsvHours",MinWidth:80,CanEmpty:1,Format:",0.00",Type:"Float"},{Name:"actualHours",MinWidth:80,CanEmpty:{isAux:a}.isAux?0:1,Format:",0.00",Type:"Float"},{Name:"nptHours",MinWidth:80,CanEmpty:1,Format:",0.00",Type:"Float"},{Name:"wowHours",MinWidth:80,CanEmpty:1,Format:",0.00",Type:"Float"},{Name:"_tftHours",MinWidth:80,Format:",0.00",Type:"Float",Formula:"actualHours - nptHours - wowHours"},{Name:"plannedDepth",Type:"Float",Visible:0,CanHide:0,CanPrint:0,CanExport:0},{Name:"_plannedDepth",MinWidth:80,Format:",0.00",Type:"Float",CanEdit:1,CanEmpty:1,OnChange:'Grid.SetValue(Row, "plannedDepth", Value, 1)',ClassFormula:'Grid.Helpers.isEmpty(plannedDepth) && "TSClassReadOnly"',Formula:"Grid.Component.props.getPlannedDepth(Grid, Row, Get, plannedDepth)"},{Name:"actualDepth",Type:"Float",Visible:0,CanHide:0,CanPrint:0,CanExport:0},{Name:"_actualDepth",MinWidth:80,Format:",0.00",Type:"Float",CanEdit:1,CanEmpty:1,OnChange:'Grid.SetValue(Row, "actualDepth", Value, 1)',ClassFormula:'Grid.Helpers.isEmpty(actualDepth) && "TSClassReadOnly"',Formula:"Grid.Component.props.getActualDepth(Grid, Row, Get, actualDepth)"},{Name:"_eventDuration",Type:"Float",Visible:0,CanHide:0,CanPrint:0,CanExport:0,Formula:"Grid.Component.props.getEventDuration(actualHours, dsvHours)"},{Name:"start",Visible:0,CanHide:0,CanPrint:0,CanExport:0},{Name:"_start",Format:"yyyy-M-d H:mm",Type:"Date",CanEdit:1,OnChange:'Grid.SetValue(Row, "start", Value, 1)',ClassFormula:'Grid.Helpers.isEmpty(start) && "TSClassReadOnly"',Formula:"start ? start : Grid.Component.props.getEventStart(Grid, Row, Get)",MinWidth:120},{Name:"_end",Format:"yyyy-M-d H:mm",Type:"Date",MinWidth:120,Formula:"Grid.Component.props.getEventEnd(_start, _eventDuration)"}],r.Head=function(){var e={Pos:"Pos",name:"Name",code:"Code",targetHours:"Rounding bug",dsvHours:"DSV",actualHours:"Actual",nptHours:"NPT",wowHours:"WOW",_tftHours:"TFT",_plannedDepth:"Planned",_actualDepth:"Actual",_start:"Start",_end:"End"};return Object.keys(e).forEach((function(t){return function(e,t){t["".concat(e,"Align")]="Center"}(t,e)})),e.id="Header",[e]}(),r.Foot=[{id:"Total",Class:"time-grid-total",Color:"#D0E6F5",CanDelete:0,CanEdit:0,Calculated:1,code:"SUM",dsvHoursFormula:"sum()",actualHoursFormula:"sum()",nptHoursFormula:"sum()",wowHoursFormula:"sum()",tftHoursFormula:"sum()",targetHoursFormula:"sum()",_plannedDepthFormula:"",_actualDepthFormula:"",_startFormula:"",_endFormula:'Grid.GetLast() ? Get(Grid.GetLast(), "_end") : ""'}],r.Solid=function(e){var t=e.OperationStartDate,a=e.DerrickType;return e.isAux?[{id:"topBarAux",Visible:0,Cells:"OperationStartDate",OperationStartDate:t,OperationStartDateRecalc:256}]:[{id:"topBar",Space:-1,Tag:"timeGridTopBar",Cells:"OperationStartDate,DerrickType",OperationStartDate:t,OperationStartDateLabel:"Start operation: ",OperationStartDateWidth:120,OperationStartDateFormat:"yyyy-M-d H:mm",OperationStartDateType:"Date",OperationStartDateRecalc:256,OperationStartDateOnChange:"Grid.Component.props.handleOperationStartDateChange(Grid,Value)",DerrickType:a,DerrickTypeType:"Bool",DerrickTypeLabel:"Aux derrick: ",DerrickTypeOnChange:"Grid.Component.props.handleDerrickTypeChange(Grid,Value)"}]}({OperationStartDate:t,isAux:a,DerrickType:n}),r.Def=function(){var e={CanEdit:0,Calculated:1,nameCanEdit:1,codeCanEdit:1,dsvHoursFormula:"sum()",actualHoursFormula:"sum()",wowHoursFormula:"sum()",nptHoursFormula:"sum()",tftHoursFormula:"sum()",targetHoursFormula:"sum()",_plannedDepthFormula:'calc("_plannedDepth ? _plannedDepth : Result")',_actualDepthFormula:'calc("_actualDepth ? _actualDepth : Result")',_startFormula:'Row.firstChild ? Get(Row.firstChild, "_start") : ""',_endFormula:'Row.lastChild ? Get(Row.lastChild, "_end") : ""'};return{Well:Object(B.a)({CDef:"Phase",AcceptDef:"Phase",Class:"time-grid-well",Color:"#d7d7d7"},e),Phase:Object(B.a)({CDef:"Event",AcceptDef:"Event",Class:"time-grid-phase",Color:"#f0f0f0"},e),Event:{AcceptDef:"",CalcOrder:["nameClass","_tftHours","_plannedDepth","_plannedDepthClass","_actualDepth","_actualDepthClass","_eventDuration","_start","_startClass","_end"].join()}}}(),function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return V.a.apply(void 0,[{Cfg:{FocusRect:2,SelectingCells:2,SelectingFocus:2},Actions:{OnDragRow:"FocusCells",OnDel:"!StartEditEmpty"},Lang:{Format:{GroupSeparator:" "}}}].concat(t,[function(e,t){if(Array.isArray(e))return t.concat(e)}]))}(I,r)}},{key:"render",value:function(){return r.a.createElement(W,Object.assign({layout:this.layout,nestedKey:a.nestedKey,getBehindHours:this.getBehindHours,getActualDepth:this.getActualDepth,getPlannedDepth:this.getPlannedDepth,getEventEnd:this.getEventEnd,getEventStart:this.getEventStart,getEventDuration:this.getEventDuration,Validator:Y},this.props))}}]),a}(n.Component),te=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onDataChanged=function(e){n.setState({Wells:e},(function(){}))},n.handleOperationStartDateChange=function(e,t){n.setState({OperationStartDate:t})},n.handleDerrickTypeChange=function(e,t){n.setState({DerrickType:t})};var r=window.localStorage.getItem("phases");return r=r?JSON.parse(r):p.getPhases(),n.state={DerrickType:0,Wells:n.prepareState(r),OperationStartDate:+new Date},n}return Object(s.a)(a,[{key:"prepareState",value:function(e){var t,a=(t=e,JSON.parse(JSON.stringify(t))),n=["Well","Phase","Event"],r=[3,3,256];return a.forEach((function(e){return function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.Def=n[a],t.Recalc=r[a],t.Items&&t.Items.forEach((function(t){return e(t,a+1)}))}(e,0)})),a}},{key:"render",value:function(){var e=this,t=this.state,a=t.DerrickType,n=t.Wells,o=t.WellsAux,i=t.OperationStartDate;return r.a.createElement("div",{className:"time-grid-view"},r.a.createElement("div",{id:"timeGridTopBar",className:"time-grid-view__top-bar"}),r.a.createElement("div",{className:"time-grid-view__grids"},r.a.createElement("div",{className:"time-grid-view__col"},r.a.createElement(ee,{id:"TimeTrackerMain",body:n,DerrickType:a,OperationStartDate:i,handleDerrickTypeChange:this.handleDerrickTypeChange,handleOperationStartDateChange:this.handleOperationStartDateChange,onDataChanged:function(t){return e.onDataChanged(t,"Wells")}})),a?r.a.createElement("div",{className:"time-grid-view__col"},r.a.createElement(ee,{id:"TimeTrackerAux",isAux:!0,body:o,DerrickType:a,OperationStartDate:i,onDataChanged:function(t){return e.onDataChanged(t,"WellsAux")}})):""))}}]),a}(n.Component),ae=a(282),ne=a(61),re=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(ae.a,null,r.a.createElement("div",{className:"views-container"},r.a.createElement(ne.c,null,r.a.createElement(ne.a,{path:"/"},r.a.createElement(te,null)),r.a.createElement(ne.a,{exact:!0,path:"/handsontable"},r.a.createElement(f,null)),r.a.createElement(ne.a,{path:"/spread-js"},r.a.createElement(w,null)),r.a.createElement(ne.a,{path:"/zing-grid"},r.a.createElement(E,null)),r.a.createElement(ne.a,{path:"/wijmo-grid"},r.a.createElement(F,null)))))}}]),a}(n.Component);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root"))}},[[289,4,5]]]);
//# sourceMappingURL=main.39e787b3.chunk.js.map